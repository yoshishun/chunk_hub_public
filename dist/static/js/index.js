(function(){var e={5358:function(e,l,t){var n={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":3432,"./el.js":3432,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":9155,"./es-do.js":9155,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":8307,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":8307,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":3333,"./ta.js":3333,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":8823,"./ug-cn.js":8823,"./uk":461,"./uk.js":461,"./ur":8985,"./ur.js":8985,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function s(e){var l=r(e);return t(l)}function r(e){if(!t.o(n,e)){var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=5358},9952:function(e,l,t){"use strict";var n=t(5130),s=t(4302),r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd1XVe53XvvD2eGQ/lXQcKuDwc2eFlCAGnUn7kT6T86J/+aNTgsWPchJJYciEOCQ8hF+G0hFCIHRSEqAuJBCqRaUEIEbmBppAIBGnESwZje8COZ+y587j3PLq+ffadGJix53HvPevcuz60xPjec89ZZ+39nf04+9vLSZKEFArFzHA1BAqFEkShUIIoFEoQhUIJolAoQRQKJYhCoQRRKJQgCoUSRKFQKEEUCiWIQrFo+Gv/8/YH+f/nsMWSHHMChyhxqPTTdyncWyJ3ScD/ztipiB3wXSqu6P17avN+TyFC5ggv4tRnmoxWTP1+5F+Mz17GPvPl49EKBWd3UsfXllPiso8VcYtmPba3fNuKrBVXrGFCbrdPwXndFL49ltI367roOpSUI4pGypv9s7q+ltj6JxqOQ07Bo/DgxGb2/a8cX0CnAWXJ5etz2TqdHiXHKlKj9w6i9XX8Ic41DmI8FVHhmmXk85MmRhCzJoiTWnig9LfJRHihgydxzAxJhBr7Bh/hK3yu+p9568FliTJF2aKMZfVd/kQOcKP6OBmS9+Rjm4zJ6faoeN0gOUn61MncLX4CJ+MRhe+P/dRxhfew2Df4CF/hs4jWg8vQYUKYMuWyRRkLjeHQ8YP0Z9mekVjA8Qj3VVcuoeDiXu63lkUE0ym6FA5PXBaNVr7qtPumGyPR4Bt8hK/wWUR5chn6XJYoU5StUHL8l+XEx2axhkS6yk+chJuP4rXLyOkIKJkS0B67adcqfL/0Y4pixxSysK6V8Yl9Mz7i3272NRFlhzJsu24Z5l9E9Ahmwfrpoj7uw3fZtktsRZKjIXnndlLxin7+W8ZTBwPf6I+Tg9HwxK2Ob8citbCoBoaxBxMCvsFH+CqjHCtUvLzflKWUcpwB91gupG5f9/Rtx39ZZBtmWyJtphKzHTQW0diP36b4aJmcLj/zGaSkHJPb4SWFi/tOJd8bTqd9s48VBRh4RKeUX/vjgXg8cpyCmz05xkJylxSoa8M5RF0eJaVIIkGOsg2yTc3UgpD94psiWxEOqDNYoOIXuHnGwE5AXUTFi46FTnRw4l/dwEm7/pSxcYnCF/gE3zInh52RRJkVP7/MlKFQcgCbjifHTAQBfsb2qsgBO3e1Cpf3UXBej3nRJKKrxU/rcH/pKzz4vNIQuRJTEmZklbg6EL4SPsE3GQPzinmfhbJDGQolB+r8w58abs5y8DqRt4ABeptLRR7koY9NleybEYw/MPisvF/ayT1/SvDewcnIcG32wfiCAbEvoCZyGaGsitdyz6XdTctQJq6fcT5mloNfYvu5yFZkpEz+RT0UrFoqpxVBV+vQxIrkaPnrbqdvXs6hcjbU+Jq4Nvvwd/BFRNeq2npwWfkX95iyE9p6PM72P/MhCPANTBSKu5WITHcC074Y9CUTkYglKBgcV/aVtlM5Kpp/RHFjDdfka7MP/2wG6m72661QNigjlBXKTGBtsjWKNs5atCf44Uds3xc5YD8Wknd2BxWuGjCzIxLWQzlFj+IjU108OL7bafM5sm5DDdfka/8T+9AJXyTMpqFsUEYoK5SZ0NbjVlvX500Q4Ha2A+JuCcEvhVS8qp/8MzspHhMSfO7mVPaP35BMRp9JsCQldbX+hmvxNfnamzJfqVvtWnGZoGxQRigroYs6UbfvOGHn4ORVkTaIbEWwtqg3MNO+Zql0JGCdVuCayhDuG9uJB7vp+oR17FbZc+NauCauLWLmKkqXr6NsUEYoK6GtxwY6CXXnEs0n2faIHLCPhhR8bikFKwRN+xZddHWu5a7Ol9yCZ2ZwHKdOxufGNeKRqS/hmnLWW1VMmQSrl5oyEkqOPbZu02IJAsic9sU7B+5uF9cOmqUfeLOdOaAZYb/CA+M/Ic9NxUoYMNfD/PT84f7xB807EAnrrbgMUBZt1w1SEpCIqfjF1Om5EuQNth0iu1r8tPLP76LCpX2yWpHDk2dGH018p6brtD5hOHf04cR3okOTZ0lqPVAW3gVdlMhdrfsTW6drRhDgRrYJcbeKZQxTkenvegNt6YBQwrQvOxG+P3ZHEia9TuClS9Br1XKge8XnxLlxjelzZ/2w4tijDMxyoHIsVQg1zvYPcy7KeZx4jG2zyFakFJF7Whu1XT2QvhfJeryeVNdplYPo4Pi9hKd7VVxVC8O5cH4+N65hXgoKuGfEHmWAskjGxI49Ntu6XHOCAD9ie1PcLSepjDNY00fB8m6KpSyJx/jgg9LfJEfLK40818w+LXY5e5zKaMfKl+DcIlSCZp0cd3U59igDI4+WOa2LunvfvDoD9RrcNLqAjDy3yzfrtKqbAkggSDIZmSlYxzz9a8BaJ101zF2rh3BuSTJaCKGMDEGujHbedXch0X2ebbdEkkDC6a9cQoWVguS53P0JP5xcHY1W/tppD9KxgrdAw5QxnwPn4nOukrPeqkzBJb0m9oJltLtt3a07QYD1IkMAeS7/hw0BXMhzJwXJc/eV7kuiyIN8OOGuUhLP06JUeoxz4FxiZLRouTsDM9WO2OdBRtsIgrzHtk3kgH00JO+cTipc2S9jqyCaluf2xwcnfuB6LndHuEsSzdP4N/gtzoFzSZHRIsaQQiPmidyXgttsnW0YQYDvsh2ROGBPxkMqXjNA/qlCFsnZ8UdlX+kfk0pymlnMWH2JOBfz0sWI+C3OMS1dzPphhPVWHOPC5wdMzIUOzFFHb1lwB2ARF+ZOPt0gshWBPLe/wCRZlu6CIkSei/cE0fD4g2ZbVWceyxH5WPwGvzXrrSTJaDnG7oBoGS3qaCULggCPsv1W5IAd8tzLllJwvpx1WthMIfyg9OVotHy1WVQ4V37wsfgNfkuSZLQcW8Q4lruU/RVbRykrggDXiwwN3uQWnXTa1xMkz2W/on2lndNajpNtAGePw2/MOicBMlqs+8K7GBNbjrFgGe2iX0nUgiAvs+0S2YpgndaFPVRc3SdmVanZlfGjifOiw5PrT/oGvPpG/vDkEH4jZ70Vt86rl5rYimmdP41/s3Uzc4Isup9XNxwvz+0tyNAlONPrtO6hctR+QnluKqNt52O3pxvtClhvxTH0egtmEwbBMlrUxU21OFGtCHKYbavIATv3j90z26kIea4QZRtahfhIuT0anrjH7O3rpjNVHzPIaLG3Lh8Tj5TbRQihjlNyehxTwTLarbZOiiEIcBfbPnGhMtroChXW9JN/VqeYdyPEY4nwwPj6ZCL8C1T+T61JhDqRv8MxZgwlJG2BxzEsrBmgeEzseqt9ti6SNIIA8t6wm901eFDZ66d7M4UkQ56LVgTTvvtKaRqFqoTWymjxGb6LpUzrImYcuzaOIWKJmAptPWpaB2sd+V+yvSB1wB6s7qXgwiUyBpbJdBqFq6MjU18mKCKhRsTyEbx558/wnRmYJzLiV+DYBat6JQ/MX7B1UCxBAKHy3IQrH6W7MhY9MWkUMNAN948/8Mm35/jMDIKlpC3gmBWQtsAjifkE61b36kGQP7DdL7KrVZXnXiYpjYKZxj09Gh7f4kB4yIa/8ZmU1brIIYiYIXaJ3Nbjflv3xBME+DZbSVwIzfIIK89dJkSea18Ihu+XflD9yPztCJnW5Ri5VRntpNh8giVb5ygvBIHu9yaRrchYRO6fFU0CSTPQlDLte6zshx9O3g3D3yJajySd4EDaAsQMsRPaetxk61zty+YTCXRqjf9jO19cOLnyYV+p8QffpcreMXJ7BeRgh77Ds6SIYhGbMBgB2tld1DW0nGL4VxbZfKBbdUHdhol1dl7mOi0MOjttGgWT11lAwU9r1mMSsX0oxwSxgYyWOvKXtiAvBPkV239I7GqZdVqX9FDw2V5+UoYipn2nt/WRMK3LMQlW9poYCZ7WfcrWsdwSBNggMrRYdcLdhjas0+q28lzJOc8bOU7jWLh2AwzEyLxclYm6Z2ZuBEE+YLtTZEVA9tzPdBh5biJ3q5rGD8yRjXbNAPkcm0RuyjTUqf3NQBDge2yHJFaGeDyi4tUD5J3WIXmzs8Y9NDgG3un80OCYIDZCHxqHbJ2iZiEIGmnB8twgzYIkd7vMxiBON59GLJyBQLKMdiM1qOPXyMn2f2f7X5EDdshzkUbhAtED0oZMXCAGiIXgtAW/YXusURdr9NsoufLcgmP20zKy2ErrNSNGRuunMUAshL7zABq61q/RBPkd2yNSn57+X3ZTQZA8t7H3H5p7RwwEt6KP2DrUtAQBIIUsiwt99Kf+tydFntuocVhVRltNWyBTRlumGslopRNkhO1mkRVlLCT3jHYzqyU48WSN+1ZWRou0BZDRyp3Ju9nWnaYnCHA3216JlQWy0gKy557dJSaNQn0nKNL1VrhnwTLavbbOUKsQBBApzzVpFHqsPFdIGoW6AfeG7cMwrcv3TC0io80LQZ5me07kU3WkYqSlhYvkpFGoz8C8bO7RyGjlpi14ztaVliMIIFOeizQKbpI+WdsDGfLcWvcmsaK53b4gdUW3lENZXjxrgrzNdq/IAftohbzzOql4eV/zjUUcu96K7w33KFhGi7rxVisTBEBSxWPiiqYqz71mGfmDQuS5tSIHstHyPZnd7+XKaI+RgKSxEggySWmKaXkVaSwi5xSbRmGiSdZpxVZGy/eEexMso73R1o2WJwiwk+11kQNZrNO6oo+Cc7vz39Wy07q4l+CKfnNvQu/ndVsnSAkifcCOAXq7R8W1y9JdRvI87QvfnTRtgdPeujLavBLkv9meEPnUHS2Tf1EPFT67lOKRnE77munrsrkH/+IeydPXqAO/VoLMDMhz5T2irTzXpFHoKeRPnluV0XYX0mlduTLamIRJtKUR5CDbbSIrGPfX/eUdVFyTQ3luku6OaNIW/HmH5LQFt9k6oAQ5Ab7PNiyxkmGndUhRvTNyJM9F1wrZaM9IZbQmG63MocewxIejRIKg+DaKbEXGI3KWBtT2hUFKyonUZeEfB3xkX4vsM3wXvIx/IwmMqCu0WH/B9qLIpzG6Wp/rpWBFj/x1WnaCAb4G7LPgad0XbZmTEmTukDnti0yzgZvKcwNPtDzXyGjZR5ONFincVEbbVAR5je0hkU/lkTL5F3TZzQ2EvjysJr1hH/0LuiVPTz9ky1oJsgB8iwQsN5hplISns5Hn9hXl9eurMlr2zUzrVsQuk5m0ZUxKkIXhKNsWkQN2yHNPhzx3WbqQMRZGYCOjXWZ8FDzjtsWWsRJkEfgh2zvyOvhWnovsucu75GTPtdlo4RN8i+W+s3nHli0pQRaPIXEeVeW53V46YJciz2Uf4IvxiX0juW/9h/JQ8fJCkGfZnpE5YK9QsHIJBZcIkOdW141d3Gt8EiyjfcaWqRKk6Z84kOc6duODjmzluUZGyz4g6Q18UhltaxHkXbbtIgfsRyvknQt5bobZc6dltP3Gl0SudmW7LUslSJ1mPUbFeWVUepDnDpB3SgazRtW0BXxt+ABfhE7rypyVbCKCTLF9U2QrgjQKg3b7zskGv3eI0+XsuDZ8EJy2YJMtQyVIHfEztldFDtghz728j4LzGphGoZq2gK9ZMDuwiH3ngTJ7OG+VLY8EAeTKc9ts9lwk42zEOi2st+JrYZIA1xYso12Xx4qWV4K8xPZzka3ISCrPDVY1YJ1WtfVYZWW0ctdbPW7LTAnSQHyDJCoykEYhTNdpuUsK6YDZqQ85cG5cw6y3CsWmLYBXG/NayfJMkI8oVR/KG7AfC8k7u4MKVw2kM1r1eB2RpDNXuAauJVhGe6stKyVIBrid7YA4r6o5N5BG4cxOI3mtaeWtymj53LiG4FwmKJs78lzB8k4QVIsN4ryqynN7AzP1ShXIc2tYg3GuSpJO6/aKltHK3KWmhQgCPMm2R+SAfTSkANlzV9Rw2rc6MDcyWtHZaPfYsiElSPaQOYVYiSnxiIprB8kpeGn+v8U2mZD8FjxzTpybKjqtqwQ5Od5g2yGyq4Xsued3UeHSvsW3IlUZLZ8L5xSctmCHLRMliCBgN/AJcV7F6SpbjBe8gUWkUaimLeBzmOUsU2JltOMkcbd+JQiNkYB8ErNVbPe0Nmq72i4kXMiwNUnfe+AcOJfgfCWbbVkoQQTiR2xvivPKynODNX0ULF9AGoVq2gL+Lc4hWEaL2N/XTBWq2Qgic3BYled2+ekeVfOV51az0WKNF59DsIx2XbNVpmYkyPNsuyWSBBJYf+USKsxHnlvNRsu/8WXLaHfb2CtBcoD1Ir2CPJf/wxSt2xmkupGT9c6QtoCPNdO66FfJldGub8aK1KwEeY9tm8gB+2hI3jmdVLii/+RbBdktfHAsfpPIfSm4zcZcCZIjfJftiMQBO1IQQBrrn3qCRYZ20SOOMTLacbHrrRDjW5q1EjUzQbiTTzeIbEUgz+232XNne59RfX+CbLT9omW0iHFFCZJPPMr2W5EDdshzL1tKwfkzrNOqrrfi73CMYBntKzbGpATJL64X6RXWZRVtxlnP+VgaBZO2wEu/wzGatkAJUk+8zLZLZCuCdVoXciux+rhVuXYVMD7Dd7Hc9Va7bGyVIE0Amf3kaXnuIHm9qTwXhr/xmWAZbUXk+E4JsmAcZtsqcsAOee6Z7VS08lwY/sZngmW0W21MlSBNhLvY9onzCqtIxipUuKqf3L6iMfyNz4RO6+6zsWwJ+NRawNvep8S1IhMxucie+8VT0o+6PIqPiB17rG+lCtNqBPkl2wts14gbsCONwqVLzT8Fr7d6wcawZeBS60Hm1GSSTu+a6d5EY6cEyQ5/YLtf4oCd4iQ1ma3H/TZ2SpAWwLfZSqSYK0o2ZqQEaQ1AN32T1vs54yYbMyVIC+GBVuwyLLBL+kCr3rzb4oV/vdZ/jZESZHb8iqS9F5GFp2yMlCAtjCENgcZGCTI79rPdqWH4FO60sVGCKOh7bIc0DNM4ZGNCShAFEFKOsyDVARttTJQgGoJpPMb2Gw2DicFjGgYlyExYpyHQGChBZsfv2B5p4ft/xMZAoQSZFZso3TKo1VC2965QgpwQI2w3t+B932zvXaEEOSnuZtvbQve7196zQgkyZ6zXe1UoQWbH02zPtcB9PmfvVaEEmTeG9B6VIIrZ8RbbvU18f/fae1QoQRYMJKU81oT3dYwkJj1VguQOk9REaY2Pw4323hRKkEVjJ9vrTXQ/r9t7UihBaobr9V6UIIrZ8Wu2J5rgPp6w96JQgtQcG2jmhGl5QWzvQaEEqQsOst2WY/9vs/egUILUtZIN59Dv4ZyTWwmSEyDnUx7luRtJar4qJUjT4RdsL+bI3xetzwolSMOwTn1Vgihmx2tsD+XAz4esrwolSMPxLZK9XGPS+qhQgmSCo2xbBPu3xfqoUIJkhh+yvSPQr3esbwolSOYYUp+UIIrZ8SzbM4L8ecb6pFCC6BNbWw8lSB7wLtt2AX5st74olCDikPWskfRZNSVIi2OKst2+c5P1QaEEEYuH2V7N4Lqv2msrlCDisa5FrqkEUSwIL7E93sDrPW6vqVCC5AaN0l/kVZ+iBGlxfMR2awOuc6u9lkIJkjvcwXagjuc/YK+hUILkEgnVdxeRDfYaCiVIbvEk2546nHePPbdCCZJ7rMvJORVKkEzwBtuOGp5vhz2nQgnSNMBu6uM1OM84Nedu80qQFscY1SYfx2Z7LoUSpOlwH9ubi/j9m/YcCiWIDth1YK4EaUU8z7Z7Ab/bbX+rUII0PdY36DcKJUgu8R7btnkcv83+RqEEaRncwnZkDscdsccqlCAthQrbDXM47gZ7rEIJ0nJ4lO2VE3z/ij1GoQRpWaxb4HcKJUhL4GW2XTN8vst+p1CCtDw+Oc6Y6/hEoQRpCRxm23rcv7fazxRKEIXFXZRuwBDZvxUC4GsIREHflguDkyQqaVYotIulUChBFAoliEKhBFEolCAKhRJEoVCCKBRKEIVCCaJQKJQgCoUSRKFQgigUShCFIhP8vwADACog5YM65zugAAAAAElFTkSuQmCC",a=t(8355),o=t(8590),d=t(1387);const i=(0,s.Lk)("img",{src:r,alt:"avatarImage",class:"avatar-image"},null,-1),c=(0,s.Lk)("span",{class:"white--text"},"© 2024 Chunk Hub",-1);var u={__name:"Index-Layout",setup(e){const l=(0,o.KR)("dark"),t=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),h=(0,d.lq)();function k(){r.value=!0}function p(){r.value=!1,fetch("/account/logout",{method:"GET"}).then((e=>{e.ok?window.location.href="/account/login":console.error("ログアウトに失敗しました")})).catch((e=>{console.error("エラーが発生しました",e)}))}function _(){window.location.href="/account/profile"}function b(){a.A.get("/account/check_session").then((e=>{u.value=e.data.logged_in})).catch((e=>{console.error("Error checking session:",e)}))}return(0,s.wB)(h,(e=>{document.title=e.meta.title||"デフォルトのタイトル"})),b(),(e,a)=>{const o=(0,s.g2)("v-app-bar-nav-icon"),d=(0,s.g2)("v-app-bar-title"),h=(0,s.g2)("v-spacer"),b=(0,s.g2)("v-avatar"),g=(0,s.g2)("v-app-bar"),f=(0,s.g2)("router-view"),m=(0,s.g2)("v-main"),v=(0,s.g2)("v-footer"),w=(0,s.g2)("v-list-item"),y=(0,s.g2)("v-list-group"),x=(0,s.g2)("v-list"),C=(0,s.g2)("v-navigation-drawer"),L=(0,s.g2)("v-card-title"),F=(0,s.g2)("v-card-text"),V=(0,s.g2)("v-btn"),j=(0,s.g2)("v-card-actions"),W=(0,s.g2)("v-card"),S=(0,s.g2)("v-dialog"),T=(0,s.g2)("v-app");return(0,s.uX)(),(0,s.Wv)(T,{theme:l.value},{default:(0,s.k6)((()=>[(0,s.bF)(g,{color:"primary"},{prepend:(0,s.k6)((()=>[(0,s.bF)(o,{onClick:a[0]||(a[0]=(0,n.D$)((e=>t.value=!t.value),["stop"]))})])),append:(0,s.k6)((()=>[(0,s.bF)(h),u.value?((0,s.uX)(),(0,s.Wv)(b,{key:0,onClick:_,style:{cursor:"pointer"}},{default:(0,s.k6)((()=>[i])),_:1})):(0,s.Q3)("",!0)])),default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.eW)("Chunk Hub")])),_:1})])),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(f)])),_:1}),(0,s.bF)(v,{color:"primary",app:"",height:"30",class:"d-flex justify-center"},{default:(0,s.k6)((()=>[c])),_:1}),(0,s.bF)(C,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),temporary:""},{default:(0,s.k6)((()=>[(0,s.bF)(x,{nav:""},{default:(0,s.k6)((()=>[u.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(w,{title:"ホーム",value:"home",to:"/","prepend-icon":e.mdiHome},null,8,["prepend-icon"]),(0,s.bF)(w,{title:"チャンク管理",value:"chunk_mng",to:"/folders/list","prepend-icon":e.mdiBookshelf},null,8,["prepend-icon"]),(0,s.bF)(w,{title:"発声練習",value:"speak_more",to:"/speak_more/select","prepend-icon":e.mdiAccountVoice},null,8,["prepend-icon"]),(0,s.bF)(y,{value:"Analytics"},{activator:(0,s.k6)((({props:l})=>[(0,s.bF)(w,(0,s.v6)(l,{title:"分析","prepend-icon":e.mdiGoogleAnalytics}),null,16,["prepend-icon"])])),default:(0,s.k6)((()=>[(0,s.bF)(w,{title:"チャンクネットワーク",value:"chunk_network",to:"/pyvis","prepend-icon":e.mdiHubOutline},null,8,["prepend-icon"]),(0,s.bF)(w,{title:"学習統計",value:"Statistics",to:"/statistics","prepend-icon":e.mdiSchool},null,8,["prepend-icon"])])),_:1}),(0,s.bF)(w,{title:"使い方",value:"usage",to:"/usage","prepend-icon":e.mdiHelp},null,8,["prepend-icon"]),(0,s.bF)(w,{title:"ログアウト",value:"logout",onClick:k,"prepend-icon":e.mdiLogout},null,8,["prepend-icon"])],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(w,{title:"アカウント登録",value:"register",to:"/account/register"}),(0,s.bF)(w,{title:"ログイン",value:"login",to:"/account/login"})],64))])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(S,{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),"max-width":"290"},{default:(0,s.k6)((()=>[(0,s.bF)(W,null,{default:(0,s.k6)((()=>[(0,s.bF)(L,{class:"text-h5"},{default:(0,s.k6)((()=>[(0,s.eW)("ログアウト確認")])),_:1}),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.eW)("本当にログアウトしますか？")])),_:1}),(0,s.bF)(j,null,{default:(0,s.k6)((()=>[(0,s.bF)(h),(0,s.bF)(V,{color:"blue darken-1",text:"",onClick:a[2]||(a[2]=e=>r.value=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1}),(0,s.bF)(V,{color:"blue darken-1",text:"",onClick:p},{default:(0,s.k6)((()=>[(0,s.eW)("OK")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["theme"])}}};const h=u;var k=h,p=t(4232);const _=e=>((0,s.Qi)("data-v-3bb9108e"),e=e(),(0,s.jt)(),e),b=_((()=>(0,s.Lk)("h1",{class:"text-center"},"ログイン",-1))),g={key:0,class:"error"};function f(e,l,t,n,r,a){const o=(0,s.g2)("v-label"),d=(0,s.g2)("v-text-field"),i=(0,s.g2)("v-progress-circular"),c=(0,s.g2)("v-btn"),u=(0,s.g2)("v-form"),h=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(h,null,{default:(0,s.k6)((()=>[b,(0,s.bF)(u,{ref:"form",modelValue:r.valid,"onUpdate:modelValue":l[2]||(l[2]=e=>r.valid=e),"lazy-validation":""},{default:(0,s.k6)((()=>[r.error&&!r.loading?((0,s.uX)(),(0,s.CE)("p",g,(0,p.v_)(r.error),1)):(0,s.Q3)("",!0),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)("メールアドレス/ユーザ名")])),_:1}),(0,s.bF)(d,{modelValue:r.identifier,"onUpdate:modelValue":l[0]||(l[0]=e=>r.identifier=e),rules:r.identifier_rules,label:"Email or Username",required:""},null,8,["modelValue","rules"]),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)("パスワード")])),_:1}),(0,s.bF)(d,{modelValue:r.password,"onUpdate:modelValue":l[1]||(l[1]=e=>r.password=e),rules:r.password_rules,label:"Password",type:"password",required:""},null,8,["modelValue","rules"]),(0,s.bF)(c,{color:"primary",class:"mr-4",onClick:a.login,disabled:!r.valid||r.loading},{default:(0,s.k6)((()=>[r.loading?((0,s.uX)(),(0,s.Wv)(i,{key:0,indeterminate:"",color:"white",size:"20"})):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)(" Login ")],64))])),_:1},8,["onClick","disabled"])])),_:1},8,["modelValue"])])),_:1})}var m={name:"LoginForm",data(){return{identifier:"",password:"",error:"",valid:!0,loading:!1,identifier_rules:[e=>!!e||"Email or Username is required"],password_rules:[e=>!!e||"Password is required"]}},methods:{login(){this.$refs.form.validate()&&(this.loading=!0,this.error="",setTimeout((()=>{const e=new FormData;e.append("identifier",this.identifier),e.append("password",this.password),fetch("/account/login",{method:"POST",body:e}).then((e=>{if(this.loading=!1,!e.ok)return e.json();window.location.href="/"})).then((e=>{e&&e.message&&(this.error=e.message)})).catch((()=>{this.loading=!1,this.error="An unexpected error occurred. Please try again later."}))}),1e3))}}},v=t(1241);const w=(0,v.A)(m,[["render",f],["__scopeId","data-v-3bb9108e"]]);var y=w;const x=e=>((0,s.Qi)("data-v-129d3188"),e=e(),(0,s.jt)(),e),C=x((()=>(0,s.Lk)("h1",{class:"text-center"},"アカウント登録",-1))),L={key:0,class:"error"};function F(e,l,t,n,r,a){const o=(0,s.g2)("v-label"),d=(0,s.g2)("v-text-field"),i=(0,s.g2)("v-btn"),c=(0,s.g2)("v-snackbar"),u=(0,s.g2)("v-form"),h=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(h,null,{default:(0,s.k6)((()=>[C,(0,s.bF)(u,{ref:"form",modelValue:r.valid,"onUpdate:modelValue":l[5]||(l[5]=e=>r.valid=e),"lazy-validation":""},{default:(0,s.k6)((()=>[r.error?((0,s.uX)(),(0,s.CE)("p",L,(0,p.v_)(r.error),1)):(0,s.Q3)("",!0),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)("ユーザ名")])),_:1}),(0,s.bF)(d,{modelValue:r.user_name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.user_name=e),rules:r.user_name_rules,label:"User Name",required:""},null,8,["modelValue","rules"]),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)("メールアドレス")])),_:1}),(0,s.bF)(d,{modelValue:r.email,"onUpdate:modelValue":l[1]||(l[1]=e=>r.email=e),rules:r.email_rules,label:"Email",required:""},null,8,["modelValue","rules"]),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)("パスワード")])),_:1}),(0,s.bF)(d,{modelValue:r.password,"onUpdate:modelValue":l[2]||(l[2]=e=>r.password=e),rules:r.password_rules,label:"Password",type:"password",required:""},null,8,["modelValue","rules"]),(0,s.bF)(i,{color:"primary",class:"mr-4",onClick:a.register,disabled:!r.valid},{default:(0,s.k6)((()=>[(0,s.eW)(" Register ")])),_:1},8,["onClick","disabled"]),(0,s.bF)(c,{modelValue:r.snackbar,"onUpdate:modelValue":l[4]||(l[4]=e=>r.snackbar=e),timeout:r.snackbarTimeout,top:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1),(0,s.bF)(i,{color:"red",text:"",onClick:l[3]||(l[3]=e=>r.snackbar=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:1})])),_:1},8,["modelValue","timeout"])])),_:1},8,["modelValue"])])),_:1})}var V={name:"RegisterForm",data(){return{user_name:"",email:"",password:"",error:"",valid:!0,snackbar:!1,snackbarMessage:"",snackbarTimeout:6e3,user_name_rules:[e=>!!e||"User name is required"],email_rules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],password_rules:[e=>!!e||"Password is required"]}},methods:{register(){if(this.$refs.form.validate()){const e=new FormData;e.append("user_name",this.user_name),e.append("email",this.email),e.append("password",this.password),fetch("/account/register",{method:"POST",body:e}).then((e=>e.json())).then((e=>{"success"===e.status?window.location.href="/account/login":(this.snackbarMessage=e.message,this.snackbar=!0)})).catch((e=>{this.error=e.response?e.response.data.message:e.message,this.snackbarMessage=this.error,this.snackbar=!0}))}}}};const j=(0,v.A)(V,[["render",F],["__scopeId","data-v-129d3188"]]);var W=j;const S=(0,s.Lk)("h1",{class:"text-center"},"プロフィール",-1),T={class:"d-flex flex-column px-2 mt-4",style:{"word-break":"break-word"}},D={class:"d-flex"},E=(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"120px"}}," ユーザID ",-1),M={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center pa-2",style:{width:"calc(100% - 120px)"}},X={class:"d-flex"},H=(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"120px"}}," ユーザ名 ",-1),z={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 120px)"}},U={class:"d-flex"},I=(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"120px"}}," メールアドレス ",-1),N={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 120px)"}};function A(e,l,t,n,r,a){const o=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(o,null,{default:(0,s.k6)((()=>[S,(0,s.Lk)("div",T,[(0,s.Lk)("div",D,[E,(0,s.Lk)("div",M,(0,p.v_)(r.profile.id),1)]),(0,s.Lk)("div",X,[H,(0,s.Lk)("div",z,(0,p.v_)(r.profile.name),1)]),(0,s.Lk)("div",U,[I,(0,s.Lk)("div",N,(0,p.v_)(r.profile.email),1)])])])),_:1})}var R={data(){return{profile:{}}},created(){this.fetchProfile()},methods:{async fetchProfile(){try{const e=await a.A.get("/api/account/profile");this.profile=e.data}catch(e){console.error("Error fetching profile:",e)}}}};const P=(0,v.A)(R,[["render",A]]);var K=P;const O=e=>((0,s.Qi)("data-v-1b773c60"),e=e(),(0,s.jt)(),e),G=O((()=>(0,s.Lk)("h1",{class:"text-center"},"ホーム",-1))),B=O((()=>(0,s.Lk)("h3",{class:"text-center mt-4",style:{color:"grey"}}," ユーザーランキング ",-1))),Q={class:"d-flex flex-column"},Z={class:"d-flex justify-space-between"},J={style:{color:"grey"}},Y={class:"d-flex flex-column",style:{width:"100%"}},q={class:"d-flex justify-space-between"},$={style:{color:"grey"}};function ee(e,l,t,n,r,a){const o=(0,s.g2)("v-divider"),d=(0,s.g2)("v-list-item-content"),i=(0,s.g2)("v-list-item"),c=(0,s.g2)("v-list"),u=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(u,null,{default:(0,s.k6)((()=>[G,(0,s.bF)(o,{class:"mt-4"}),B,(0,s.bF)(c,{style:{"word-break":"break-word"},class:"mt-4"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.userRankings,((l,t)=>((0,s.uX)(),(0,s.Wv)(i,{key:t},{default:(0,s.k6)((()=>[e.$vuetify.display.xs?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"d-flex flex-column"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Q,[(0,s.Lk)("div",Z,[(0,s.Lk)("h5",null,(0,p.v_)(t+1)+". "+(0,p.v_)(l.name),1),(0,s.Lk)("h6",J,"総発音数: "+(0,p.v_)(l.total_pronounced_count),1)])])])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(d,{key:1,class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Y,[(0,s.Lk)("div",q,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",null,(0,p.v_)(t+1)+". "+(0,p.v_)(l.name),1)]),(0,s.Lk)("div",null,[(0,s.Lk)("h5",$,"総発音数: "+(0,p.v_)(l.total_pronounced_count),1)])])])])),_:2},1024))])),_:2},1024)))),128))])),_:1})])),_:1})}var le={data(){return{userRankings:[]}},mounted(){this.fetchUserRankings()},methods:{async fetchUserRankings(){try{const e=await fetch("/api/ranking"),l=await e.json();this.userRankings=l}catch(e){console.error("Error fetching user rankings:",e)}}}};const te=(0,v.A)(le,[["render",ee],["__scopeId","data-v-1b773c60"]]);var ne=te;const se=(0,s.Lk)("h1",{class:"text-center"},"404 - Not Found",-1);function re(e,l){const t=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(t,null,{default:(0,s.k6)((()=>[se])),_:1})}const ae={},oe=(0,v.A)(ae,[["render",re]]);var de=oe;const ie=(0,s.Lk)("h4",{class:"text-center"},"- チャンクネットワーク -",-1),ce=(0,s.Lk)("h1",{class:"text-center"},null,-1),ue=["src"];function he(e,l,t,n,r,a){const o=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(o,{class:"graph-container",style:{width:"100%"}},{default:(0,s.k6)((()=>[ie,ce,(0,s.Lk)("iframe",{src:r.graph_html,frameborder:"0",width:"100%",height:"600"},null,8,ue)])),_:1})}var ke={data(){return{graph_html:""}},methods:{async loadGraphHtml(){try{const e=await fetch("/api/test/pyvis");if(!e.ok)throw new Error("Network response was not ok");const l=await e.text();this.graph_html="data:text/html;charset=utf-8,"+encodeURIComponent(l)}catch(e){console.error("Error loading graph HTML:",e)}}},async mounted(){await this.loadGraphHtml()}};const pe=(0,v.A)(ke,[["render",he]]);var _e=pe;const be=e=>((0,s.Qi)("data-v-47a68c0c"),e=e(),(0,s.jt)(),e),ge=be((()=>(0,s.Lk)("h5",{class:"text-center"},"Chunk Hub",-1))),fe=be((()=>(0,s.Lk)("h2",{class:"text-center"},"- フォルダ一覧 -",-1))),me={key:0,class:"text-center mt-4",style:{color:"grey"}},ve={key:1,class:"text-center mt-4",style:{color:"grey"}},we={class:"d-flex justify-center mt-4"},ye={key:2},xe=be((()=>(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg text-center bg-primary",style:{"font-size":"16px"}}," チャンク ",-1))),Ce={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Le=be((()=>(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg text-center bg-primary",style:{"font-size":"16px"}}," チャンク文/フレーズ ",-1))),Fe={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Ve={key:3,class:"d-flex"},je=be((()=>(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," チャンク ",-1))),We={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Se=be((()=>(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," チャンク文/フレーズ ",-1))),Te={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},De=be((()=>(0,s.Lk)("p",{style:{color:"red"}}," ※登録されているチャンク・チャンク文/フレーズも削除されます。 ",-1)));function Ee(e,l,t,r,a,o){const d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-btn"),c=(0,s.g2)("v-card-title"),u=(0,s.g2)("v-text-field"),h=(0,s.g2)("v-textarea"),k=(0,s.g2)("v-radio"),_=(0,s.g2)("v-radio-group"),b=(0,s.g2)("v-card-text"),g=(0,s.g2)("v-card-actions"),f=(0,s.g2)("v-card"),m=(0,s.g2)("v-dialog"),v=(0,s.g2)("SvgIcon"),w=(0,s.g2)("FolderCompo"),y=(0,s.g2)("v-row"),x=(0,s.g2)("v-container"),C=(0,s.g2)("v-snackbar");return(0,s.uX)(),(0,s.Wv)(x,null,{default:(0,s.k6)((()=>[ge,fe,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",me," チャンク・チャンク文/フレーズのフォルダを管理します。 ")):((0,s.uX)(),(0,s.CE)("h4",ve," チャンク・チャンク文/フレーズのフォルダを管理します。 ")),(0,s.bF)(d,{class:"mt-4"}),(0,s.Lk)("div",we,[(0,s.bF)(i,{color:"primary",width:"50%",onClick:o.openCreateDialog},{default:(0,s.k6)((()=>[(0,s.eW)("新規フォルダ作成")])),_:1},8,["onClick"])]),(0,s.bF)(m,{modelValue:a.createDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>a.createDialog=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("新規フォルダ作成")])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:a.newFolder.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.newFolder.name=e),label:"フォルダ名"},null,8,["modelValue"]),(0,s.bF)(h,{modelValue:a.newFolder.notes,"onUpdate:modelValue":l[1]||(l[1]=e=>a.newFolder.notes=e),label:"説明"},null,8,["modelValue"]),(0,s.bF)(_,{modelValue:a.newFolder.class,"onUpdate:modelValue":l[2]||(l[2]=e=>a.newFolder.class=e),label:"フォルダの種類"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.folderClasses,(e=>((0,s.uX)(),(0,s.Wv)(k,{key:e.value,label:e.title,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{text:"",onClick:l[3]||(l[3]=e=>a.createDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1}),(0,s.bF)(i,{text:"",onClick:o.createFolder},{default:(0,s.k6)((()=>[(0,s.eW)("作成")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",ye,[(0,s.bF)(x,{class:""},{default:(0,s.k6)((()=>[xe,(0,s.Lk)("div",Ce,[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.all_folder_rows,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[1==e.class?((0,s.uX)(),(0,s.Wv)(w,{key:e.id,props_fid:e.id,props_class:e.class,total_pronounced_count:e.total_pronounced_count,item_count:e.item_count},{folder_name:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.name),1)])),create_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.create_date),1)])),update_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.update_date),1)])),actions:(0,s.k6)((()=>[(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.openEditDialog(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_pencil},null,8,["path"])])),_:2},1032,["onClick"]),(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.confirmDelete(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_delete},null,8,["path"])])),_:2},1032,["onClick"])])),_:2},1032,["props_fid","props_class","total_pronounced_count","item_count"])):(0,s.Q3)("",!0)],64)))),256))])),_:1})])])),_:1}),(0,s.bF)(x,{class:""},{default:(0,s.k6)((()=>[Le,(0,s.Lk)("div",Fe,[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.all_folder_rows,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[2==e.class?((0,s.uX)(),(0,s.Wv)(w,{key:e.id,props_fid:e.id,props_class:e.class,total_pronounced_count:e.total_pronounced_count,item_count:e.item_count},{folder_name:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.name),1)])),create_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.create_date),1)])),update_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.update_date),1)])),actions:(0,s.k6)((()=>[(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.openEditDialog(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_pencil},null,8,["path"])])),_:2},1032,["onClick"]),(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.confirmDelete(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_delete},null,8,["path"])])),_:2},1032,["onClick"])])),_:2},1032,["props_fid","props_class","total_pronounced_count","item_count"])):(0,s.Q3)("",!0)],64)))),256))])),_:1})])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",Ve,[(0,s.bF)(x,{class:"",style:{width:"50%"}},{default:(0,s.k6)((()=>[je,(0,s.Lk)("div",We,[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.all_folder_rows,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[1==e.class?((0,s.uX)(),(0,s.Wv)(w,{key:e.id,props_fid:e.id,props_class:e.class,total_pronounced_count:e.total_pronounced_count,item_count:e.item_count},{folder_name:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.name),1)])),create_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.create_date),1)])),update_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.update_date),1)])),actions:(0,s.k6)((()=>[(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.openEditDialog(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_pencil},null,8,["path"])])),_:2},1032,["onClick"]),(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.confirmDelete(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_delete},null,8,["path"])])),_:2},1032,["onClick"])])),_:2},1032,["props_fid","props_class","total_pronounced_count","item_count"])):(0,s.Q3)("",!0)],64)))),256))])),_:1})])])),_:1}),(0,s.bF)(x,{class:"",style:{width:"50%"}},{default:(0,s.k6)((()=>[Se,(0,s.Lk)("div",Te,[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.all_folder_rows,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[2==e.class?((0,s.uX)(),(0,s.Wv)(w,{key:e.id,props_fid:e.id,props_class:e.class,total_pronounced_count:e.total_pronounced_count,item_count:e.item_count},{folder_name:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.name),1)])),create_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.create_date),1)])),update_date:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.update_date),1)])),actions:(0,s.k6)((()=>[(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.openEditDialog(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_pencil},null,8,["path"])])),_:2},1032,["onClick"]),(0,s.bF)(i,{icon:"",onClick:(0,n.D$)((l=>o.confirmDelete(e)),["stop"]),color:"primary",class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{type:"mdi",path:a.mdi_delete},null,8,["path"])])),_:2},1032,["onClick"])])),_:2},1032,["props_fid","props_class","total_pronounced_count","item_count"])):(0,s.Q3)("",!0)],64)))),256))])),_:1})])])),_:1})])),(0,s.bF)(m,{modelValue:a.editDialog,"onUpdate:modelValue":l[8]||(l[8]=e=>a.editDialog=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("フォルダ編集")])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:a.editFolder.name,"onUpdate:modelValue":l[5]||(l[5]=e=>a.editFolder.name=e),label:"フォルダ名"},null,8,["modelValue"]),(0,s.bF)(h,{modelValue:a.editFolder.notes,"onUpdate:modelValue":l[6]||(l[6]=e=>a.editFolder.notes=e),label:"説明"},null,8,["modelValue"])])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{text:"",onClick:l[7]||(l[7]=e=>a.editDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1}),(0,s.bF)(i,{text:"",onClick:o.saveFolder},{default:(0,s.k6)((()=>[(0,s.eW)("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(m,{modelValue:a.deleteDialog,"onUpdate:modelValue":l[10]||(l[10]=e=>a.deleteDialog=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("フォルダ削除確認")])),_:1}),(0,s.bF)(d),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.eW)(" 本当に"+(0,p.v_)(a.folderToDelete.name)+"を削除しますか？ ",1)])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[De])),_:1}),(0,s.bF)(d),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{text:"",onClick:l[9]||(l[9]=e=>a.deleteDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1}),(0,s.bF)(i,{text:"",onClick:o.deleteFolder},{default:(0,s.k6)((()=>[(0,s.eW)("削除")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(C,{modelValue:a.snackbar.show,"onUpdate:modelValue":l[12]||(l[12]=e=>a.snackbar.show=e),color:a.snackbar.color,top:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(a.snackbar.text)+" ",1),(0,s.bF)(i,{text:"",onClick:l[11]||(l[11]=e=>a.snackbar.show=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("閉じる")])),_:1})])),_:1},8,["modelValue","color"])])),_:1})}var Me=t(1517),Xe=t(2132);const He={class:"d-flex"},ze={class:"d-flex flex-column"},Ue={class:"ml-2",style:{"font-size":"12px"}},Ie={class:"ml-2",style:{"font-size":"12px"}},Ne={class:"d-flex flex-column"},Ae={class:"ml-2",style:{"font-size":"12px"}},Re={class:"ml-2",style:{"font-size":"12px"}};function Pe(e,l,t,n,r,a){const o=(0,s.g2)("v-card-title"),d=(0,s.g2)("svg-icon"),i=(0,s.g2)("v-card-subtitle"),c=(0,s.g2)("v-card-actions"),u=(0,s.g2)("v-card"),h=(0,s.g2)("v-col");return(0,s.uX)(),(0,s.Wv)(h,{cols:"12",class:"pb-0"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{onClick:a.navigateToFolder,class:"border"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"folder_name",{},void 0,!0)])),_:3}),(0,s.Lk)("div",He,[(0,s.Lk)("div",ze,[(0,s.bF)(i,{class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{height:"14px",width:"14px",type:"mdi",path:r.mdi_account_voice},null,8,["path"]),(0,s.Lk)("div",Ue,(0,p.v_)(t.total_pronounced_count),1)])),_:1}),(0,s.bF)(i,{class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{height:"14px",width:"14px",type:"mdi",path:r.mdi_format_list_bulleted_square},null,8,["path"]),(0,s.Lk)("div",Ie,(0,p.v_)(t.item_count),1)])),_:1})]),(0,s.Lk)("div",Ne,[(0,s.bF)(i,{class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{height:"14px",width:"14px",type:"mdi",path:r.mdi_calendar_plus},null,8,["path"]),(0,s.Lk)("div",Ae,[(0,s.RG)(e.$slots,"create_date",{},void 0,!0)])])),_:3}),(0,s.bF)(i,{class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{height:"14px",width:"14px",type:"mdi",path:r.mdi_calendar_refresh},null,8,["path"]),(0,s.Lk)("div",Re,[(0,s.RG)(e.$slots,"update_date",{},void 0,!0)])])),_:3})])]),(0,s.bF)(c,{class:"actions-right"},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"actions",{},void 0,!0)])),_:3})])),_:3},8,["onClick"])])),_:3})}t(4114);var Ke={components:{SvgIcon:Me.A},data(){return{mdi_calendar_plus:Xe.Vqb,mdi_calendar_refresh:Xe.of,mdi_account_voice:Xe.M55,mdi_format_list_bulleted_square:Xe.Wv$}},props:{props_fid:{type:String,required:!0},props_class:{type:Number,required:!0},total_pronounced_count:{type:Number,required:!0},item_count:{type:Number,required:!0}},methods:{navigateToFolder(){1===this.props_class?this.$router.push({name:"Chunks-List",query:{fid:this.props_fid}}):2===this.props_class&&this.$router.push({name:"Chunk-Sentences-List",query:{fid:this.props_fid}})}}};const Oe=(0,v.A)(Ke,[["render",Pe],["__scopeId","data-v-c7fdf908"]]);var Ge=Oe,Be={components:{FolderCompo:Ge,SvgIcon:Me.A},data(){return{mdi_pencil:Xe.Q43,mdi_delete:Xe.y_G,mdi_folder_move:Xe.Ysy,all_folder_rows:[],fid:this.$route.query.fid,createDialog:!1,newFolder:{name:"",notes:"",class:null},folderClasses:[{title:"チャンク",value:1},{title:"チャンク文/フレーズ",value:2}],editDialog:!1,deleteDialog:!1,moveDialog:!1,editFolder:{name:"",notes:""},folderToDelete:null,currentFolderClass:null,selectedChunks:[],selectedChunkSentences:[],selectedFolder:null,chunks:[],chunkSentences:[],folders:[],snackbar:{show:!1,text:"",color:"success"},cache:{folders:null,folderDetails:{}}}},async mounted(){this.cache.folders?this.all_folder_rows=this.cache.folders:await this.fetchFolders(),await this.fetchFolderDetails()},methods:{openCreateDialog(){this.createDialog=!0},async createFolder(){try{const e=await fetch("/api/folders/list/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.newFolder)});if(!e.ok)throw new Error("Network response was not ok");const l=await e.json();console.log("Folder created:",l),this.createDialog=!1,this.newFolder={name:"",notes:"",class:null},await this.fetchFolders(!0),await this.fetchFolderDetails(),this.showSnackbar("フォルダが正常に作成されました","success")}catch(e){console.error("Error creating folder:",e),this.showSnackbar("フォルダの作成中にエラーが発生しました","error")}},openEditDialog(e){this.editFolder={...e},this.editFolder.notes&&"null"!==this.editFolder.notes||(this.editFolder.notes=""),this.editDialog=!0},async saveFolder(){try{const e=await fetch("/api/folders/edit",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.editFolder)});if(!e.ok)throw new Error("Network response was not ok");const l=await e.json();console.log("Folder saved:",l),this.editDialog=!1,await this.fetchFolders(!0),await this.fetchFolderDetails(),this.showSnackbar("フォルダが正常に保存されました","success")}catch(e){console.error("Error saving folder:",e),this.showSnackbar("フォルダの保存中にエラーが発生しました","error")}},confirmDelete(e){this.folderToDelete=e,this.deleteDialog=!0},async deleteFolder(){try{const e=await fetch("/api/folders/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this.folderToDelete.id})});if(!e.ok)throw new Error("Network response was not ok");const l=await e.json();console.log("Folder and related data deleted successfully:",l),this.deleteDialog=!1,await this.fetchFolders(!0),await this.fetchFolderDetails(),this.showSnackbar("フォルダが正常に削除されました","success")}catch(e){console.error("Error deleting folder:",e),this.showSnackbar("フォルダの削除中にエラーが発生しました","error")}},async fetchFolders(e=!1){try{const l=await fetch("/api/folders/list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error("Network response was not ok");const t=await l.json();this.all_folder_rows=t,e&&(this.cache.folders=t)}catch(l){console.log("List fetch エラー"),console.error(l)}},async fetchFolderDetails(){for(const l of this.all_folder_rows)if(this.cache.folderDetails[l.id])l.total_pronounced_count=this.cache.folderDetails[l.id].total_pronounced_count,l.item_count=this.cache.folderDetails[l.id].item_count;else try{const e=await fetch(`/api/folders/total_pronounced_count?fid=${l.id}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();l.total_pronounced_count=t.total_pronounced_count;const n=await fetch(`/api/folders/item_count?fid=${l.id}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Network response was not ok");const s=await n.json();l.item_count=s.item_count,this.cache.folderDetails[l.id]={total_pronounced_count:t.total_pronounced_count,item_count:s.item_count}}catch(e){console.log("Fetch folder details error"),console.error(e)}},showSnackbar(e,l){this.snackbar.text=e,this.snackbar.color=l,this.snackbar.show=!0}}};const Qe=(0,v.A)(Be,[["render",Ee],["__scopeId","data-v-47a68c0c"]]);var Ze=Qe;const Je={class:"text-center"},Ye=(0,s.Lk)("h2",{class:"text-center"},"- チャンク一覧 -",-1),qe={key:0,class:"text-center mt-4",style:{color:"grey"}},$e={key:1,class:"text-center mt-4",style:{color:"grey"}},el={class:"d-flex justify-space-evenly my-2 py-2"},ll={class:"border-lg rounded-b-lg pa-4 mb-4"};function tl(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-btn"),c=(0,s.g2)("v-text-field"),u=(0,s.g2)("ChunkCompo"),h=(0,s.g2)("v-snackbar"),k=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(k,null,{default:(0,s.k6)((()=>[(0,s.Lk)("h5",Je,[(0,s.bF)(o,{height:"14px",width:"14px",type:"mdi",path:r.mdiPuzzle},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(r.folder_name),1)]),Ye,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",qe," 登録したチャンクを管理します。 ")):((0,s.uX)(),(0,s.CE)("h4",$e," 登録したチャンクを管理します。 ")),(0,s.bF)(d,{class:"mt-4"}),(0,s.Lk)("div",el,[(0,s.bF)(i,{onClick:a.toChunksAdd,width:"30%","prepend-icon":r.mdiPlusCircle,class:"border",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("追加")])),_:1},8,["onClick","prepend-icon"]),(0,s.bF)(i,{onClick:a.toChunksEdit,width:"30%","prepend-icon":r.mdiFileEdit,class:"border",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("編集")])),_:1},8,["onClick","prepend-icon"])]),(0,s.bF)(c,{modelValue:r.search_keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>r.search_keyword=e),"single-line":"",density:"compact",label:"クイック検索",outlined:"","hide-details":"",clearable:"","prepend-inner-icon":r.mdiMagnify},null,8,["modelValue","prepend-inner-icon"]),(0,s.Lk)("div",ll,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filtered_chunks,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(u,{props_chunk_row:e,key:e.id,onChunkMoved:a.removeChunk},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_row","onChunkMoved"]))],64)))),256))]),(0,s.bF)(h,{modelValue:r.snackbar,"onUpdate:modelValue":l[2]||(l[2]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(i,(0,s.v6)({color:"white",text:"",onClick:l[1]||(l[1]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])])),_:1})}const nl=e=>((0,s.Qi)("data-v-79802c51"),e=e(),(0,s.jt)(),e),sl={name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px"}},rl={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},al={name:"learning",class:"border d-flex align-center pa-1 fontsize-14"},ol=["innerHTML"],dl={name:"translating",class:"border d-flex align-center pa-1 fontsize-14"},il=["innerHTML"],cl={class:"d-flex",style:{width:"100%"}},ul={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 120px)"}},hl={class:"d-flex",style:{height:"100%"}},kl={name:"learning",class:"border d-flex align-center pa-1 fontsize-14",style:{width:"50%"}},pl=["innerHTML"],_l={name:"translating",class:"border d-flex align-center pa-1 fontsize-14",style:{width:"50%"}},bl=["innerHTML"],gl={class:"d-flex"},fl={name:"detail",style:{width:"80px"}},ml={name:"top",class:"border rounded-te-lg text-end pr-1 fontsize-14",style:{height:"20px"}},vl={class:"d-flex flex-column px-2"},wl={class:"d-flex"},yl=nl((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),xl={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Cl=["innerHTML"],Ll={class:"d-flex"},Fl=nl((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),Vl={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},jl=["innerHTML"],Wl={class:"d-flex mt-4"},Sl=nl((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),Tl={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},Dl={class:"d-flex"},El=nl((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),Ml={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Xl=["innerHTML"],Hl={class:"d-flex"},zl=nl((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),Ul={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Il=["innerHTML"],Nl={class:"d-flex"},Al=nl((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Rl={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Pl=["innerHTML"];function Kl(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-card-title"),i=(0,s.g2)("v-slider"),c=(0,s.g2)("v-autocomplete"),u=(0,s.g2)("v-btn"),h=(0,s.g2)("v-container"),k=(0,s.g2)("v-spacer"),_=(0,s.g2)("v-card-actions"),b=(0,s.g2)("v-card"),g=(0,s.g2)("v-dialog"),f=(0,s.g2)("v-snackbar");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[7]||(l[7]=e=>r.isHovered=!0),onMouseleave:l[8]||(l[8]=e=>r.isHovered=!1),class:(0,p.C4)([{"hover-effect":r.isHovered},"my-3 d-flex rounded-lg"]),style:(0,p.Tr)([{backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"},{"word-break":"break-word",width:"100%"}])},[(0,s.Lk)("div",sl,[(0,s.RG)(e.$slots,"index",{class:"fontsize-14"},(()=>[(0,s.eW)("インデックス")]),!0)]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",rl,[(0,s.Lk)("div",al,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.learning_chunk)},null,8,ol)]),(0,s.Lk)("div",dl,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.translating_chunk)},null,8,il)]),(0,s.Lk)("div",cl,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"25%",backgroundColor:e<=r.local_chunk_row.politeness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",ul,[(0,s.Lk)("div",hl,[(0,s.Lk)("div",kl,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.learning_chunk)},null,8,pl)]),(0,s.Lk)("div",_l,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.translating_chunk)},null,8,bl)])]),(0,s.Lk)("div",gl,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"25%",backgroundColor:e<=r.local_chunk_row.politeness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",fl,[(0,s.Lk)("div",ml,(0,p.v_)(t.props_chunk_row.pronounced_count),1),(0,s.bF)(g,{modelValue:r.dialog,"onUpdate:modelValue":l[4]||(l[4]=e=>r.dialog=e),"max-width":"600",style:{"font-size":"12px"}},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border rounded-be-lg d-flex align-center justify-center",style:{cursor:"pointer",height:"calc(100% - 20px)"}},e,{onClick:l[0]||(l[0]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(o,{type:"mdi",path:r.mdiMenu},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("詳細")])),_:1}),(0,s.Lk)("div",vl,[(0,s.Lk)("div",wl,[yl,(0,s.Lk)("div",xl,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.learning_chunk)},null,8,Cl)])]),(0,s.Lk)("div",Ll,[Fl,(0,s.Lk)("div",Vl,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.translating_chunk)},null,8,jl)])]),(0,s.Lk)("div",Wl,[Sl,(0,s.Lk)("div",Tl,[(0,s.bF)(i,{modelValue:r.local_chunk_row.politeness,"onUpdate:modelValue":l[1]||(l[1]=e=>r.local_chunk_row.politeness=e),color:a.politenessColor,"show-ticks":"always",max:"4",step:"1","tick-size":"4",readonly:"","hide-details":"auto"},null,8,["modelValue","color"])])]),(0,s.Lk)("div",Dl,[El,(0,s.Lk)("div",Ml,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.nuance)},null,8,Xl)])]),(0,s.Lk)("div",Hl,[zl,(0,s.Lk)("div",Ul,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.situation)},null,8,Il)])]),(0,s.Lk)("div",Nl,[Al,(0,s.Lk)("div",Rl,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.notes)},null,8,Pl)])])]),(0,s.bF)(h,{class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:r.selectedFolder,"onUpdate:modelValue":l[2]||(l[2]=e=>r.selectedFolder=e),label:"移動先のフォルダを選択",items:r.folders,"item-title":"name","item-value":"id",clearable:""},null,8,["modelValue","items"]),(0,s.bF)(u,{icon:"",onClick:a.moveChunk,color:"primary"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{type:"mdi",path:r.mdi_folder_move},null,8,["path"])])),_:1},8,["onClick"])])),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(k),(0,s.bF)(u,{text:"Close",variant:"plain",onClick:l[3]||(l[3]=e=>r.dialog=!1),color:"primary"})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(f,{modelValue:r.snackbar,"onUpdate:modelValue":l[6]||(l[6]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(u,(0,s.v6)({color:"white",text:"",onClick:l[5]||(l[5]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])])],38)}function Ol(e){return e=parseFloat(e),e>=0&&e<1?"#3F51B5":e>=1&&e<2?"#03A9F4":e>=2&&e<3?"#4CAF50":e>=3&&e<4?"#FF9800":e>=4?"#F44336":"grey"}var Gl={components:{SvgIcon:Me.A},props:{props_chunk_row:Object},data(){return{mdiMenu:Xe.ExW,mdi_folder_move:Xe.Ysy,dialog:!1,local_chunk_row:{...this.props_chunk_row},isHovered:!1,folders:[],selectedFolder:null,snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},watch:{props_chunk_row:{handler(e){this.local_chunk_row={...e}},deep:!0}},computed:{politenessColor(){return Ol(this.local_chunk_row.politeness)}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.dialog=!0,this.loadFolders()},loadFolders(){a.A.get("/api/chunk_folders/list?fclass=1").then((e=>{this.folders=e.data.filter((e=>e.id!==this.local_chunk_row.folder_id))})).catch((e=>{console.error(e),this.showSnackbar("フォルダの読み込みに失敗しました。","error")}))},moveChunk(){this.selectedFolder?a.A.post("/api/chunks/move",{chunk_ids:[this.local_chunk_row.id],target_folder_id:this.selectedFolder}).then((()=>{this.showSnackbar("チャンクが移動されました。","success"),this.dialog=!1,this.$emit("chunk-moved",this.local_chunk_row.id)})).catch((e=>{console.error(e),this.showSnackbar("チャンクの移動に失敗しました。","error")})):this.showSnackbar("フォルダを選択してください。","error")},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0}}};const Bl=(0,v.A)(Gl,[["render",Kl],["__scopeId","data-v-79802c51"]]);var Ql=Bl,Zl={components:{ChunkCompo:Ql,SvgIcon:Me.A},data(){return{mdiMagnify:Xe.U4M,mdiPlusCircle:Xe.JPg,mdiFileEdit:Xe.vZx,mdiPuzzle:Xe.TWX,all_chunk_rows:[],filtered_chunks:[],fid:this.$route.query.fid,folder_name:"",search_keyword:"",snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},methods:{filterChunks(){this.filtered_chunks=this.all_chunk_rows.filter((e=>!this.search_keyword||((e.learning_chunk||"").includes(this.search_keyword)||(e.translating_chunk||"").includes(this.search_keyword)||(e.nuance||"").includes(this.search_keyword)||(e.situation||"").includes(this.search_keyword)||(e.notes||"").includes(this.search_keyword))))},removeChunk(e){this.all_chunk_rows=this.all_chunk_rows.filter((l=>l.id!==e)),this.filterChunks(),this.showSnackbar("チャンクを移動しました。","success")},toChunksAdd(){this.$router.push({path:"/chunks/list/add",query:{fid:this.$route.query.fid}})},toChunksEdit(){this.$router.push({path:"/chunks/list/edit",query:{fid:this.$route.query.fid}})},toBack(){this.$router.go(-1)},async fetchFolderName(){try{const e=await fetch(`/api/folders/name?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.name?this.folder_name=l.name:console.error("Folder not found")}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダの読み込みに失敗しました。","error")}},async fetchChunks(){try{const e=await fetch(`/api/chunks/list?fid=${this.fid}`,{method:"GET"}),l=await e.json();this.all_chunk_rows=l,this.filterChunks()}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンクの読み込みに失敗しました。","error")}},async fetchData(){try{await this.fetchFolderName(),await this.fetchChunks()}catch(e){console.error("Fetch data error:",e),this.showSnackbar("データの読み込みに失敗しました。","error")}},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0}},mounted(){this.fetchData()},watch:{search_keyword(){this.filterChunks()}}};const Jl=(0,v.A)(Zl,[["render",tl]]);var Yl=Jl;const ql={class:"text-center"},$l=(0,s.Lk)("h2",{class:"text-center"},"- チャンク追加 -",-1),et={key:0,class:"text-center mt-4",style:{color:"grey"}},lt={key:1,class:"text-center mt-4",style:{color:"grey"}},tt=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," チャンク入力フォーム ",-1),nt={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},st={class:"d-flex justify-center"},rt=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," 追加チャンク一覧 ",-1),at={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},ot={class:"d-flex justify-center mt-4"};function dt(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-label"),c=(0,s.g2)("v-textarea"),u=(0,s.g2)("v-slider"),h=(0,s.g2)("v-btn"),k=(0,s.g2)("ChunkWithTrashCompo"),_=(0,s.g2)("v-snackbar"),b=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(b,{"grid-list-xs":""},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",ql,[(0,s.bF)(o,{height:"14px",width:"14px",type:"mdi",path:r.mdi_puzzle},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(r.folder_name),1)]),$l,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",et," チャンクを追加します。 ")):((0,s.uX)(),(0,s.CE)("h4",lt," チャンクを追加します。 ")),(0,s.bF)(d,{class:"mt-4"}),tt,(0,s.Lk)("div",nt,[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("チャンク")])),_:1}),(0,s.bF)(c,{modelValue:r.form_data.learning_chunk,"onUpdate:modelValue":l[0]||(l[0]=e=>r.form_data.learning_chunk=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("翻訳文")])),_:1}),(0,s.bF)(c,{modelValue:r.form_data.translating_chunk,"onUpdate:modelValue":l[1]||(l[1]=e=>r.form_data.translating_chunk=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("丁寧度")])),_:1}),(0,s.bF)(u,{modelValue:r.form_data.politeness,"onUpdate:modelValue":l[2]||(l[2]=e=>r.form_data.politeness=e),color:a.politenessColor,class:"w-90",ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"1","tick-size":"4"},null,8,["modelValue","color"]),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("ニュアンス")])),_:1}),(0,s.bF)(c,{modelValue:r.form_data.nuance,"onUpdate:modelValue":l[3]||(l[3]=e=>r.form_data.nuance=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("シチュエーション")])),_:1}),(0,s.bF)(c,{modelValue:r.form_data.situation,"onUpdate:modelValue":l[4]||(l[4]=e=>r.form_data.situation=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("備考")])),_:1}),(0,s.bF)(c,{modelValue:r.form_data.notes,"onUpdate:modelValue":l[5]||(l[5]=e=>r.form_data.notes=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.Lk)("div",st,[(0,s.bF)(h,{onClick:a.addContainer,disabled:a.isAddButtonDisabled,width:"30%","prepend-icon":r.mdi_arrow_down_circle,color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("追加")])),_:1},8,["onClick","disabled","prepend-icon"])])]),rt,(0,s.Lk)("div",at,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.form_data_list,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(k,{key:e.id,props_chunk_row:e,onSave:a.saveChangeChunkRow,onDelete:a.deleteChunkRow},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_row","onSave","onDelete"]))],64)))),256)),(0,s.Lk)("div",ot,[(0,s.bF)(h,{onClick:a.submitFormData,disabled:a.isSubmitButtonDisabled,width:"30%",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("送信")])),_:1},8,["onClick","disabled"])])]),(0,s.bF)(_,{modelValue:r.snackbar,"onUpdate:modelValue":l[7]||(l[7]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(h,(0,s.v6)({color:"white",text:"",onClick:l[6]||(l[6]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])])),_:1})}const it={style:{"word-break":"break-word",width:"100%","font-size":"14px"},class:"my-3 d-flex"},ct={name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px"}},ut={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},ht={name:"learning",class:"border d-flex align-center pa-1"},kt=["innerHTML"],pt={name:"translating",class:"border d-flex align-center pa-1"},_t=["innerHTML"],bt={class:"d-flex",style:{width:"100%"}},gt={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 120px)"}},ft={class:"d-flex",style:{height:"100%"}},mt={name:"learning",class:"border d-flex align-center pa-1",style:{width:"50%"}},vt=["innerHTML"],wt={name:"translating",class:"border d-flex align-center pa-1",style:{width:"50%"}},yt=["innerHTML"],xt={class:"d-flex"},Ct={name:"detail",style:{width:"80px"}},Lt={name:"top",class:"border rounded-te-lg text-end pr-1",style:{height:"20px"}},Ft={class:"d-flex",style:{cursor:"pointer",height:"calc(100% - 20px)"}};function Vt(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-card-title"),i=(0,s.g2)("v-divider"),c=(0,s.g2)("v-label"),u=(0,s.g2)("v-textarea"),h=(0,s.g2)("v-col"),k=(0,s.g2)("v-slider"),_=(0,s.g2)("v-row"),b=(0,s.g2)("v-card-text"),g=(0,s.g2)("v-spacer"),f=(0,s.g2)("v-btn"),m=(0,s.g2)("v-card-actions"),v=(0,s.g2)("v-card"),w=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[10]||(l[10]=e=>r.isHovered=!0),onMouseleave:l[11]||(l[11]=e=>r.isHovered=!1),class:(0,p.C4)([{"hover-effect":r.isHovered},"rounded-lg"]),style:(0,p.Tr)({backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"})},[(0,s.Lk)("div",it,[(0,s.Lk)("div",ct,[(0,s.RG)(e.$slots,"index",{},(()=>[(0,s.eW)("インデックス")]),!0)]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",ut,[(0,s.Lk)("div",ht,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.learning_chunk)},null,8,kt)]),(0,s.Lk)("div",pt,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.translating_chunk)},null,8,_t)]),(0,s.Lk)("div",bt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"25%",backgroundColor:e<=t.props_chunk_row.politeness?a.displayPolitenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",gt,[(0,s.Lk)("div",ft,[(0,s.Lk)("div",mt,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.learning_chunk)},null,8,vt)]),(0,s.Lk)("div",wt,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_row.translating_chunk)},null,8,yt)])]),(0,s.Lk)("div",xt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"25%",backgroundColor:e<=t.props_chunk_row.politeness?a.displayPolitenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",Ct,[(0,s.Lk)("div",Lt,(0,p.v_)(t.props_chunk_row.pronounced_count),1),(0,s.Lk)("div",Ft,[(0,s.bF)(w,{modelValue:r.dialog,"onUpdate:modelValue":l[8]||(l[8]=e=>r.dialog=e),"max-width":"600"},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border d-flex align-center justify-center",style:{width:"50%"}},e,{onClick:l[0]||(l[0]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(o,{type:"mdi",path:r.mdi_file_edit},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.eW)("編集")])),_:1}),(0,s.bF)(i),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(_,{dense:""},{default:(0,s.k6)((()=>[(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("チャンク")])),_:1}),(0,s.bF)(u,{modelValue:r.edited_chunk.learning_chunk,"onUpdate:modelValue":l[1]||(l[1]=e=>r.edited_chunk.learning_chunk=e),clear:"",rows:"1",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("翻訳文")])),_:1}),(0,s.bF)(u,{modelValue:r.edited_chunk.translating_chunk,"onUpdate:modelValue":l[2]||(l[2]=e=>r.edited_chunk.translating_chunk=e),clear:"",rows:"1",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("丁寧度")])),_:1}),(0,s.bF)(k,{modelValue:r.edited_chunk.politeness,"onUpdate:modelValue":l[3]||(l[3]=e=>r.edited_chunk.politeness=e),color:a.editPolitenessColor,class:"w-90",ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"1","tick-size":"4"},null,8,["modelValue","color"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("ニュアンス")])),_:1}),(0,s.bF)(u,{modelValue:r.edited_chunk.nuance,"onUpdate:modelValue":l[4]||(l[4]=e=>r.edited_chunk.nuance=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("シチュエーション")])),_:1}),(0,s.bF)(u,{modelValue:r.edited_chunk.situation,"onUpdate:modelValue":l[5]||(l[5]=e=>r.edited_chunk.situation=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("備考")])),_:1}),(0,s.bF)(u,{modelValue:r.edited_chunk.notes,"onUpdate:modelValue":l[6]||(l[6]=e=>r.edited_chunk.notes=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(i),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(g),(0,s.bF)(f,{text:"Close",variant:"plain",onClick:l[7]||(l[7]=e=>r.dialog=!1),color:"primary"}),(0,s.bF)(f,{color:"primary",text:"Save",variant:"tonal",onClick:a.saveChanges},{default:(0,s.k6)((()=>[(0,s.eW)("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Lk)("div",{class:"border rounded-be-lg d-flex align-center justify-center",style:{width:"50%"},onClick:l[9]||(l[9]=(...e)=>a.deleteChunk&&a.deleteChunk(...e))},[(0,s.bF)(o,{type:"mdi",path:r.mdi_trash_can_outline},null,8,["path"])])])])])],38)}var jt={props:{props_chunk_row:Object},components:{SvgIcon:Me.A},data(){return{mdi_file_edit:Xe.vZx,mdi_trash_can_outline:Xe.FhF,dialog:!1,isHovered:!1,edited_chunk:{id:"",learning_chunk:"",translating_chunk:"",politeness:0,nuance:"",situation:"",notes:"",pronounced_count:0}}},computed:{displayPolitenessColor(){const e=this.props_chunk_row.politeness;return 0===e?"#3F51B5":1===e?"#03A9F4":2===e?"#4CAF50":3===e?"#FF9800":4===e?"#F44336":"grey"},editPolitenessColor(){const e=this.edited_chunk.politeness;return 0===e?"#3F51B5":1===e?"#03A9F4":2===e?"#4CAF50":3===e?"#FF9800":4===e?"#F44336":"grey"}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.edited_chunk={id:this.props_chunk_row.id,learning_chunk:this.props_chunk_row.learning_chunk,translating_chunk:this.props_chunk_row.translating_chunk,politeness:this.props_chunk_row.politeness,nuance:this.props_chunk_row.nuance,situation:this.props_chunk_row.situation,notes:this.props_chunk_row.notes,pronounced_count:this.props_chunk_row.pronounced_count},this.dialog=!0},saveChanges(){this.$emit("save",this.edited_chunk),this.dialog=!1},deleteChunk(){this.$emit("delete",this.props_chunk_row)}}};const Wt=(0,v.A)(jt,[["render",Vt],["__scopeId","data-v-4385d538"]]);var St=Wt,Tt={components:{ChunkWithTrashCompo:St,SvgIcon:Me.A},data(){return{mdi_arrow_down_circle:Xe.UTs,mdi_puzzle:Xe.TWX,form_data:{learning_chunk:"",translating_chunk:"",politeness:2,nuance:"",situation:"",notes:""},form_data_list:[],folder_name:"",fid:this.$route.query.fid,snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},computed:{isAddButtonDisabled(){return!this.form_data.learning_chunk},isSubmitButtonDisabled(){return 0===this.form_data_list.length},politenessColor(){const e=this.form_data.politeness;return 0===e?"indigo":1===e?"light-blue":2===e?"green":3===e?"orange":4===e?"red":"grey"}},methods:{addContainer(){const e={...this.form_data};this.form_data_list.push(e),this.form_data={learning_chunk:"",translating_chunk:"",politeness:2,nuance:"",situation:"",notes:""},this.showSnackbar("チャンクを追加しました。","success")},saveChangeChunkRow(e){const l=this.form_data_list.findIndex((l=>l.id===e.id));-1!==l&&(this.form_data_list.splice(l,1,e),this.showSnackbar("チャンクの変更内容を保存しました。","success"))},deleteChunkRow(e){const l=this.form_data_list.indexOf(e);-1!==l&&(this.form_data_list.splice(l,1),this.showSnackbar("チャンクを削除しました。","success"))},async fetchFolderName(){try{const e=await fetch(`/api/folders/name?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.name?this.folder_name=l.name:(console.error("Folder not found"),this.showSnackbar("フォルダが見つかりませんでした。","error"))}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダの読み込みに失敗しました。","error")}},async submitFormData(){const e=JSON.stringify({form_data_list:this.form_data_list});try{const l=await fetch(`/api/chunks/list/add?fid=${this.fid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!l.ok)throw new Error("Network response was not ok");const t=await l.json();console.log("Data submitted successfully:",t),this.showSnackbar("データが送信されました。","success"),window.location.href=`/chunks/list?fid=${this.fid}`}catch(l){console.error("Error submitting data:",l),this.showSnackbar("データの送信に失敗しました。","error")}},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0},toBack(){this.$router.go(-1)}},async mounted(){await this.fetchFolderName()}};const Dt=(0,v.A)(Tt,[["render",dt]]);var Et=Dt;const Mt={class:"text-center"},Xt=(0,s.Lk)("h2",{class:"text-center"},"- チャンク編集 -",-1),Ht={key:0,class:"text-center mt-4",style:{color:"grey"}},zt={key:1,class:"text-center mt-4",style:{color:"grey"}},Ut=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b text-center bg-primary",style:{"font-size":"16px"}}," チャンク一覧 ",-1),It={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Nt=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," 削除一覧 ",-1),At={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Rt={class:"d-flex justify-center"};function Pt(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-text-field"),c=(0,s.g2)("ChunkWithTrashCompo"),u=(0,s.g2)("ChunkWithRedoCompo"),h=(0,s.g2)("v-btn"),k=(0,s.g2)("v-snackbar"),_=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(_,null,{default:(0,s.k6)((()=>[(0,s.Lk)("h5",Mt,[(0,s.bF)(o,{height:"14px",width:"14px",type:"mdi",path:r.mdiPuzzle},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(r.folder_name),1)]),Xt,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",Ht," 登録したチャンクを編集（登録内容の変更・削除等）します。 ")):((0,s.uX)(),(0,s.CE)("h4",zt," 登録したチャンクを編集（登録内容の変更・削除等）します。 ")),(0,s.bF)(d,{class:"mt-4"}),(0,s.bF)(i,{class:"mt-4",modelValue:r.search_keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>r.search_keyword=e),"single-line":"",density:"compact",label:"クイック検索",outlined:"","hide-details":"",clearable:"","prepend-inner-icon":r.mdiMagnify},null,8,["modelValue","prepend-inner-icon"]),Ut,(0,s.Lk)("div",It,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filtered_chunks,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(c,{key:e.id,props_chunk_row:e,onSave:a.saveChangeChunkRow,onDelete:a.deleteChunkRow},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_row","onSave","onDelete"]))],64)))),256))]),Nt,(0,s.Lk)("div",At,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.delete_chunk_rows,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(u,{key:e.id,props_chunk_row:e,onRedo:a.redoChunkRow},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_row","onRedo"]))],64)))),256))]),(0,s.Lk)("div",Rt,[(0,s.bF)(h,{onClick:a.submitFormData,disabled:!a.is_data_changed,width:"30%",class:"my-4",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("保存")])),_:1},8,["onClick","disabled"])]),(0,s.bF)(k,{modelValue:r.snackbar,"onUpdate:modelValue":l[2]||(l[2]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(h,(0,s.v6)({color:"white",text:"",onClick:l[1]||(l[1]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])])),_:1})}const Kt=e=>((0,s.Qi)("data-v-e19fc702"),e=e(),(0,s.jt)(),e),Ot={style:{"word-break":"break-word",width:"100%","font-size":"14px"},class:"my-3 d-flex"},Gt={name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px"}},Bt={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},Qt={name:"learning",class:"border d-flex align-center pa-1"},Zt=["innerHTML"],Jt={name:"translating",class:"border d-flex align-center pa-1"},Yt=["innerHTML"],qt={class:"d-flex",style:{width:"100%"}},$t={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 120px)"}},en={class:"d-flex",style:{height:"100%"}},ln={name:"learning",class:"border d-flex align-center pa-1",style:{width:"50%"}},tn=["innerHTML"],nn={name:"translating",class:"border d-flex align-center pa-1",style:{width:"50%"}},sn=["innerHTML"],rn={class:"d-flex"},an={name:"detail",style:{width:"80px"}},on={name:"top",class:"border rounded-te-lg text-end pr-1",style:{height:"20px"}},dn={class:"d-flex",style:{cursor:"pointer",height:"calc(100% - 20px)"}},cn={class:"d-flex flex-column px-2"},un={class:"d-flex"},hn=Kt((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),kn={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},pn=["innerHTML"],_n={class:"d-flex"},bn=Kt((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),gn={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},fn=["innerHTML"],mn={class:"d-flex mt-4"},vn=Kt((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),wn={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},yn={class:"d-flex"},xn=Kt((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),Cn={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Ln=["innerHTML"],Fn={class:"d-flex"},Vn=Kt((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),jn={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Wn=["innerHTML"],Sn={class:"d-flex"},Tn=Kt((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Dn={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},En=["innerHTML"];function Mn(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-card-title"),i=(0,s.g2)("v-slider"),c=(0,s.g2)("v-spacer"),u=(0,s.g2)("v-btn"),h=(0,s.g2)("v-card-actions"),k=(0,s.g2)("v-card"),_=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[5]||(l[5]=e=>r.isHovered=!0),onMouseleave:l[6]||(l[6]=e=>r.isHovered=!1),class:(0,p.C4)({"hover-effect":r.isHovered}),style:(0,p.Tr)({backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"})},[(0,s.Lk)("div",Ot,[(0,s.Lk)("div",Gt,[(0,s.RG)(e.$slots,"index",{},(()=>[(0,s.eW)("インデックス")]),!0)]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",Bt,[(0,s.Lk)("div",Qt,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.learning_chunk)},null,8,Zt)]),(0,s.Lk)("div",Jt,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.translating_chunk)},null,8,Yt)]),(0,s.Lk)("div",qt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"25%",backgroundColor:e<=r.local_chunk_row.politeness?a.PolitenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",$t,[(0,s.Lk)("div",en,[(0,s.Lk)("div",ln,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.learning_chunk)},null,8,tn)]),(0,s.Lk)("div",nn,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.translating_chunk)},null,8,sn)])]),(0,s.Lk)("div",rn,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"25%",backgroundColor:e<=r.local_chunk_row.politeness?a.PolitenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",an,[(0,s.Lk)("div",on,(0,p.v_)(r.local_chunk_row.pronounced_count),1),(0,s.Lk)("div",dn,[(0,s.bF)(_,{modelValue:r.dialog,"onUpdate:modelValue":l[3]||(l[3]=e=>r.dialog=e),"max-width":"600",style:{"font-size":"12px"}},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border d-flex align-center justify-center",style:{width:"50%"}},e,{onClick:l[0]||(l[0]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(o,{type:"mdi",path:r.mdiMenu},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("詳細")])),_:1}),(0,s.Lk)("div",cn,[(0,s.Lk)("div",un,[hn,(0,s.Lk)("div",kn,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.learning_chunk)},null,8,pn)])]),(0,s.Lk)("div",_n,[bn,(0,s.Lk)("div",gn,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.translating_chunk)},null,8,fn)])]),(0,s.Lk)("div",mn,[vn,(0,s.Lk)("div",wn,[(0,s.bF)(i,{modelValue:r.local_chunk_row.politeness,"onUpdate:modelValue":l[1]||(l[1]=e=>r.local_chunk_row.politeness=e),color:a.PolitenessColor,"show-ticks":"always",max:"4",step:"1","tick-size":"4",readonly:"","hide-details":"auto"},null,8,["modelValue","color"])])]),(0,s.Lk)("div",yn,[xn,(0,s.Lk)("div",Cn,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.nuance)},null,8,Ln)])]),(0,s.Lk)("div",Fn,[Vn,(0,s.Lk)("div",jn,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.situation)},null,8,Wn)])]),(0,s.Lk)("div",Sn,[Tn,(0,s.Lk)("div",Dn,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_row.notes)},null,8,En)])])]),(0,s.bF)(h,null,{default:(0,s.k6)((()=>[(0,s.bF)(c),(0,s.bF)(u,{text:"Close",variant:"plain",onClick:l[2]||(l[2]=e=>r.dialog=!1),color:"primary"})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Lk)("div",{class:"border rounded-be-lg d-flex align-center justify-center",style:{width:"50%"},onClick:l[4]||(l[4]=(...e)=>a.redoChunk&&a.redoChunk(...e))},[(0,s.bF)(o,{type:"mdi",path:r.mdiArrowURightTopBold},null,8,["path"])])])])])],38)}var Xn={props:{props_chunk_row:Object},components:{SvgIcon:Me.A},data(){return{mdiMenu:Xe.ExW,mdiArrowURightTopBold:Xe.hcN,dialog:!1,isHovered:!1,local_chunk_row:{...this.props_chunk_row}}},watch:{props_chunk_row:{handler(e){this.local_chunk_row={...e}},deep:!0,immediate:!0}},computed:{PolitenessColor(){const e=this.local_chunk_row.politeness;return 0===e?"#3F51B5":1===e?"#03A9F4":2===e?"#4CAF50":3===e?"#FF9800":4===e?"#F44336":"grey"}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.dialog=!0},redoChunk(){this.$emit("redo",this.props_chunk_row)}}};const Hn=(0,v.A)(Xn,[["render",Mn],["__scopeId","data-v-e19fc702"]]);var zn=Hn,Un={components:{ChunkWithTrashCompo:St,ChunkWithRedoCompo:zn,SvgIcon:Me.A},data(){return{mdiMagnify:Xe.U4M,mdiPuzzle:Xe.TWX,all_chunk_rows:[],filtered_chunks:[],edit_chunk_rows:[],delete_chunk_rows:[],fid:this.$route.query.fid,folder_name:"",search_keyword:"",save_change_executed:!1,snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},computed:{is_data_changed(){return this.save_change_executed||this.delete_chunk_rows.length>0}},methods:{filterChunks(){this.filtered_chunks=this.all_chunk_rows.filter((e=>!this.search_keyword||((e.learning_chunk||"").includes(this.search_keyword)||(e.translating_chunk||"").includes(this.search_keyword)||(e.nuance||"").includes(this.search_keyword)||(e.situation||"").includes(this.search_keyword)||(e.notes||"").includes(this.search_keyword))))},saveChangeChunkRow(e){const l=this.all_chunk_rows.findIndex((l=>l.id===e.id)),t=this.filtered_chunks.findIndex((l=>l.id===e.id)),n=this.edit_chunk_rows.findIndex((l=>l.id===e.id));-1===l&&-1===t||(this.all_chunk_rows.splice(l,1,e),this.filtered_chunks.splice(t,1,e),-1!==n?this.edit_chunk_rows.splice(n,1,e):this.edit_chunk_rows.push(e),this.filterChunks(),this.save_change_executed=!0,this.showSnackbar("チャンクの編集内容を保存しました。","success"))},deleteChunkRow(e){const l=this.all_chunk_rows.indexOf(e),t=this.filtered_chunks.indexOf(e),n=this.edit_chunk_rows.indexOf(e);-1===l&&-1===t&&-1===n||(this.all_chunk_rows.splice(l,1),this.filtered_chunks.splice(t,1),this.edit_chunk_rows.splice(n,1),this.delete_chunk_rows.push(e),this.showSnackbar("チャンクを削除一覧に移動しました。","success")),this.filterChunks()},redoChunkRow(e){const l=this.delete_chunk_rows.indexOf(e);-1!==l&&(this.delete_chunk_rows.splice(l,1),this.all_chunk_rows.push(e),this.filtered_chunks.push(e),this.edit_chunk_rows.push(e),this.showSnackbar("チャンクを元に戻しました。","success")),this.filterChunks()},async submitFormData(){const e=JSON.stringify({editDataList:this.edit_chunk_rows,deleteDataList:this.delete_chunk_rows});try{const l=await a.A.post(`/api/chunks/list/edit?fid=${this.fid}`,e,{headers:{"Content-Type":"application/json"}});if(200!==l.status)throw new Error("Network response was not ok");window.location.href=`/chunks/list?fid=${this.fid}`}catch(l){console.error("Error submitting data:",l),this.showSnackbar("データの送信に失敗しました。","error")}},async fetchFolderName(){try{const e=await a.A.get(`/api/folders/name?fid=${this.fid}`);e.data.name?this.folder_name=e.data.name:(console.error("Folder not found"),this.showSnackbar("フォルダが見つかりませんでした。","error"))}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダの読み込みに失敗しました。","error")}},async fetchChunks(){try{const e=await a.A.get(`/api/chunks/list?fid=${this.fid}`);this.all_chunk_rows=e.data,this.filterChunks()}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンクの読み込みに失敗しました。","error")}},async fetchData(){try{await this.fetchFolderName(),await this.fetchChunks()}catch(e){console.error("Fetch data error:",e),this.showSnackbar("データの読み込みに失敗しました。","error")}},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0}},mounted(){this.fetchData()},watch:{search_keyword:function(){this.filterChunks()}}};const In=(0,v.A)(Un,[["render",Pt]]);var Nn=In;const An={class:"text-center"},Rn=(0,s.Lk)("h2",{class:"text-center"},"- チャンク文/フレーズ 一覧 -",-1),Pn={key:0,class:"text-center mt-4",style:{color:"grey"}},Kn={key:1,class:"text-center mt-4",style:{color:"grey"}},On={class:"d-flex justify-space-evenly my-2 py-2"},Gn={height:"480",tile:"",class:"border-lg overflow-auto rounded-b-lg pa-4 mb-4"};function Bn(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-btn"),c=(0,s.g2)("v-text-field"),u=(0,s.g2)("ChunkSentenceCompo"),h=(0,s.g2)("v-snackbar"),k=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(k,null,{default:(0,s.k6)((()=>[(0,s.Lk)("h5",An,[(0,s.bF)(o,{height:"14px",width:"14px",type:"mdi",path:r.mdi_lock_pattern},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(r.folder_name),1)]),Rn,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",Pn," 登録したチャンク文/フレーズを管理します。 ")):((0,s.uX)(),(0,s.CE)("h4",Kn," 登録したチャンク文/フレーズを管理します。 ")),(0,s.bF)(d,{class:"mt-4"}),(0,s.Lk)("div",On,[(0,s.bF)(i,{onClick:a.toChunkSentencesCreate,width:"45%","prepend-icon":r.mdi_plus_circle,class:"border",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("作成")])),_:1},8,["onClick","prepend-icon"]),(0,s.bF)(i,{onClick:a.toChunkSentencesEdit,width:"45%","prepend-icon":r.mdi_file_edit,class:"border",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("一括編集")])),_:1},8,["onClick","prepend-icon"])]),(0,s.bF)(c,{modelValue:r.search_keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>r.search_keyword=e),"single-line":"",density:"compact",label:"クイック検索",outlined:"","hide-details":"",clearable:"","prepend-inner-icon":r.mdi_magnify},null,8,["modelValue","prepend-inner-icon"]),(0,s.Lk)("div",Gn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filtered_chunks,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(u,{props_chunk_sentence_row:e,index:l,onChunkSentenceMoved:a.removeChunkSentence,key:e.id},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_sentence_row","index","onChunkSentenceMoved"]))],64)))),256))]),(0,s.bF)(h,{modelValue:r.snackbar,"onUpdate:modelValue":l[2]||(l[2]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(i,(0,s.v6)({color:"white",text:"",onClick:l[1]||(l[1]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])])),_:1})}const Qn=e=>((0,s.Qi)("data-v-49a87973"),e=e(),(0,s.jt)(),e),Zn={style:{"word-break":"break-word",width:"100%"},class:"my-3 d-flex"},Jn={name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px","font-size":"12px"}},Yn={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},qn={name:"learning",class:"border d-flex flex-wrap align-center"},$n={name:"learning",class:"border d-flex align-center pa-1",style:{"font-size":"14px"}},es=["innerHTML"],ls={name:"translating",class:"border d-flex align-center pa-1",style:{"font-size":"14px"}},ts=["innerHTML"],ns={class:"d-flex",style:{width:"100%"}},ss={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},rs={name:"learning",class:"border d-flex flex-wrap align-center py-1 pl-1"},as={class:"d-flex"},os={name:"learning",class:"border d-flex align-center pa-1",style:{width:"50%","font-size":"14px"}},ds=["innerHTML"],is={name:"translating",class:"border d-flex align-center pa-1",style:{width:"50%","font-size":"14px"}},cs=["innerHTML"],us={class:"d-flex",style:{width:"100%"}},hs={name:"detail"},ks={name:"top",class:"border rounded-te-lg text-end pr-1",style:{width:"60px",height:"20px"}},ps={class:"d-flex flex-column px-2"},_s={class:"d-flex"},bs=Qn((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 使用チャンク ",-1))),gs={class:"border-t-lg border-e-lg rounded-te-lg d-flex flex-wrap align-center",style:{width:"calc(100% - 110px)"}},fs={class:"d-flex"},ms=Qn((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" チャンク文/"),(0,s.Lk)("br"),(0,s.eW)("フレーズ ")],-1))),vs={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ws=["innerHTML"],ys={class:"d-flex"},xs=Qn((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),Cs={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Ls=["innerHTML"],Fs={class:"d-flex mt-4"},Vs=Qn((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" 丁寧度"),(0,s.Lk)("br"),(0,s.eW)("(自動計算) ")],-1))),js={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},Ws={class:"d-flex"},Ss=Qn((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),Ts={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Ds=["innerHTML"],Es={class:"d-flex"},Ms=Qn((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Xs={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Hs=["innerHTML"],zs={class:"d-flex flex-column px-2"},Us={class:"d-flex"},Is=Qn((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg border-b rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),Ns={class:"border-t-lg border-e-lg rounded-te-lg border-b pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},As=["innerHTML"],Rs={class:"d-flex"},Ps=Qn((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),Ks={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Os=["innerHTML"],Gs={class:"d-flex mt-4"},Bs=Qn((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),Qs={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},Zs={class:"d-flex"},Js=Qn((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),Ys={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},qs=["innerHTML"],$s={class:"d-flex"},er=Qn((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),lr={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},tr=["innerHTML"],nr={class:"d-flex"},sr=Qn((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),rr={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ar=["innerHTML"];function or(e,l,t,n,r,a){const o=(0,s.g2)("v-chip"),d=(0,s.g2)("svg-icon"),i=(0,s.g2)("v-card-title"),c=(0,s.g2)("v-slider"),u=(0,s.g2)("v-autocomplete"),h=(0,s.g2)("v-btn"),k=(0,s.g2)("v-container"),_=(0,s.g2)("v-spacer"),b=(0,s.g2)("v-card-actions"),g=(0,s.g2)("v-card"),f=(0,s.g2)("v-dialog"),m=(0,s.g2)("v-snackbar");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[10]||(l[10]=e=>r.isHovered=!0),onMouseleave:l[11]||(l[11]=e=>r.isHovered=!1),class:(0,p.C4)([{"hover-effect":r.isHovered},"rounded-lg"]),style:(0,p.Tr)({backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"})},[(0,s.Lk)("div",Zn,[(0,s.Lk)("div",Jn,[(0,s.RG)(e.$slots,"index",{},(()=>[(0,s.eW)("インデックス")]),!0)]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",Yn,[(0,s.Lk)("div",qn,[0!==t.props_chunk_sentence_row.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_row.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"x-small",class:"ma-1",key:e.chunk_id,onClick:l=>a.openChunkDetailDialog(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)("設定無し")])),_:1}))]),(0,s.Lk)("div",$n,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.chunk_sentence)},null,8,es)]),(0,s.Lk)("div",ls,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.translating_sentence)},null,8,ts)]),(0,s.Lk)("div",ns,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*a.computedPoliteness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",ss,[(0,s.Lk)("div",rs,[0!==t.props_chunk_sentence_row.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_row.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"x-small",class:"ma-1",key:e.chunk_id,onClick:l=>a.openChunkDetailDialog(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)("設定無し")])),_:1}))]),(0,s.Lk)("div",as,[(0,s.Lk)("div",os,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.chunk_sentence)},null,8,ds)]),(0,s.Lk)("div",is,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.translating_sentence)},null,8,cs)])]),(0,s.Lk)("div",us,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*a.computedPoliteness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",hs,[(0,s.Lk)("div",ks,(0,p.v_)(t.props_chunk_sentence_row.pronounced_count),1),(0,s.bF)(f,{modelValue:r.dialog,"onUpdate:modelValue":l[4]||(l[4]=e=>r.dialog=e),"max-width":"600",style:{"font-size":"12px"}},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border rounded-be-lg d-flex align-center justify-center",style:{cursor:"pointer",height:"calc(100% - 20px)"}},e,{onClick:l[0]||(l[0]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(d,{type:"mdi",path:r.mdi_menu},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("詳細")])),_:1}),(0,s.Lk)("div",ps,[(0,s.Lk)("div",_s,[bs,(0,s.Lk)("div",gs,[0!==r.local_chunk_sentence_obj.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(r.local_chunk_sentence_obj.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"small",class:"ma-1",key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1024))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)("設定無し")])),_:1}))])]),(0,s.Lk)("div",fs,[ms,(0,s.Lk)("div",vs,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.chunk_sentence)},null,8,ws)])]),(0,s.Lk)("div",ys,[xs,(0,s.Lk)("div",Cs,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.translating_sentence)},null,8,Ls)])]),(0,s.Lk)("div",Fs,[Vs,(0,s.Lk)("div",js,[(0,s.bF)(c,{modelValue:a.computedPoliteness,"onUpdate:modelValue":l[1]||(l[1]=e=>a.computedPoliteness=e),color:a.politenessColor,"show-ticks":"always",max:"4",step:"0.1",ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",Ws,[Ss,(0,s.Lk)("div",Ts,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.situation)},null,8,Ds)])]),(0,s.Lk)("div",Es,[Ms,(0,s.Lk)("div",Xs,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.notes)},null,8,Hs)])])]),(0,s.bF)(k,{class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:r.selectedFolder,"onUpdate:modelValue":l[2]||(l[2]=e=>r.selectedFolder=e),label:"移動先のフォルダを選択",items:r.folders,"item-title":"name","item-value":"id",clearable:""},null,8,["modelValue","items"]),(0,s.bF)(h,{icon:"",onClick:a.moveChunkSentence,color:"primary"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{type:"mdi",path:r.mdi_folder_move},null,8,["path"])])),_:1},8,["onClick"])])),_:1}),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(_),(0,s.bF)(h,{text:"Close",variant:"plain",onClick:l[3]||(l[3]=e=>r.dialog=!1),color:"primary"})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(f,{modelValue:r.chunkDetailDialog,"onUpdate:modelValue":l[7]||(l[7]=e=>r.chunkDetailDialog=e),"max-width":"600",style:{"font-size":"12px"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("使用チャンク(詳細)")])),_:1}),(0,s.Lk)("div",zs,[(0,s.Lk)("div",Us,[Is,(0,s.Lk)("div",Ns,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.learning_chunk)},null,8,As)])]),(0,s.Lk)("div",Rs,[Ps,(0,s.Lk)("div",Ks,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.translating_chunk)},null,8,Os)])]),(0,s.Lk)("div",Gs,[Bs,(0,s.Lk)("div",Qs,[(0,s.bF)(c,{modelValue:r.selectedChunk.value.politeness,"onUpdate:modelValue":l[5]||(l[5]=e=>r.selectedChunk.value.politeness=e),color:a.displayPolitenessColor(r.selectedChunk.value.politeness),"show-ticks":"always",max:"4",step:"1","hide-details":"auto","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",Zs,[Js,(0,s.Lk)("div",Ys,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.nuance)},null,8,qs)])]),(0,s.Lk)("div",$s,[er,(0,s.Lk)("div",lr,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.situation)},null,8,tr)])]),(0,s.Lk)("div",nr,[sr,(0,s.Lk)("div",rr,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.notes)},null,8,ar)])])]),(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(_),(0,s.bF)(h,{color:"primary",onClick:l[6]||(l[6]=e=>r.chunkDetailDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("閉じる")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,s.bF)(m,{modelValue:r.snackbar,"onUpdate:modelValue":l[9]||(l[9]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(h,(0,s.v6)({color:"white",text:"",onClick:l[8]||(l[8]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])],38)}var dr={props:{props_chunk_sentence_row:Object},components:{SvgIcon:Me.A},data(){return{mdi_menu:Xe.ExW,mdi_folder_move:Xe.Ysy,dialog:!1,local_chunk_sentence_obj:{...this.props_chunk_sentence_row},isHovered:!1,chunkDetailDialog:!1,selectedChunk:{},folders:[],selectedFolder:null,snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},watch:{props_chunk_sentence_row:{handler(e){this.local_chunk_sentence_obj={...e}},deep:!0,immediate:!0}},computed:{computedPoliteness(){return parseFloat(this.calculatePoliteness(this.local_chunk_sentence_obj.used_chunks)).toFixed(1)},politenessColor(){return Ol(this.computedPoliteness)}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.dialog=!0,this.local_chunk_sentence_obj={...this.props_chunk_sentence_row},this.loadFolders()},calculatePoliteness(e){if(!e||0===e.length)return 0;const l=e.reduce(((e,l)=>e+(l.value.politeness||0)),0);return(l/e.length).toFixed(1)},openChunkDetailDialog(e){this.selectedChunk=e,this.chunkDetailDialog=!0},displayPolitenessColor(e){return Ol(e)},loadFolders(){a.A.get("/api/chunk_folders/list?fclass=2").then((e=>{this.folders=e.data.filter((e=>e.id!==this.local_chunk_sentence_obj.folder_id)),console.log("this.folders: ",this.folders)})).catch((e=>{console.error(e),this.showSnackbar("フォルダの読み込みに失敗しました。","error")}))},moveChunkSentence(){this.selectedFolder?a.A.post("/api/chunk_sentences/move",{chunk_sentence_ids:[this.local_chunk_sentence_obj.id],target_folder_id:this.selectedFolder}).then((()=>{this.showSnackbar("チャンク文/フレーズが移動されました。","success"),this.dialog=!1,this.$emit("chunk-sentence-moved",this.local_chunk_sentence_obj.id)})).catch((e=>{console.error(e),this.showSnackbar("チャンク文/フレーズの移動に失敗しました。","error")})):this.showSnackbar("フォルダを選択してください。","error")},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0}}};const ir=(0,v.A)(dr,[["render",or],["__scopeId","data-v-49a87973"]]);var cr=ir,ur={components:{ChunkSentenceCompo:cr,SvgIcon:Me.A},data(){return{mdi_magnify:Xe.U4M,mdi_plus_circle:Xe.JPg,mdi_file_edit:Xe.vZx,mdi_lock_pattern:Xe.izq,all_chunk_sentence_rows:[],filtered_chunks:[],selectedChunks:[],folder_name:"",fid:this.$route.query.fid,search_keyword:"",snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},methods:{filterChunks(){this.filtered_chunks=this.all_chunk_sentence_rows.filter((e=>!this.search_keyword||(e.chunk_sentence.includes(this.search_keyword)||e.translating_sentence.includes(this.search_keyword)||e.situation.includes(this.search_keyword)||e.notes.includes(this.search_keyword))))},async fetchFolderName(){try{const e=await fetch(`/api/folders/name?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.name?this.folder_name=l.name:(console.error("Folder not found"),this.showSnackbar("フォルダの読み込みに失敗しました。","error"))}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダの読み込みに失敗しました。","error")}},async fetchChunkSentences(){try{const e=await fetch(`/api/chunk_sentences/list?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.length>0&&l[0].chunk_sentences?this.all_chunk_sentence_rows=l[0].chunk_sentences:this.all_chunk_sentence_rows=[],this.filterChunks()}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンク文/フレーズの読み込みに失敗しました。","error")}},async fetchData(){try{await this.fetchFolderName(),await this.fetchChunkSentences()}catch(e){console.error("Fetch data error:",e),this.showSnackbar("データの読み込みに失敗しました。","error")}},toChunkSentencesCreate(){this.$router.push({path:"/chunk_sentences/list/create",query:{fid:this.$route.query.fid}})},toChunkSentencesEdit(){this.$router.push({path:"/chunk_sentences/list/edit",query:{fid:this.$route.query.fid}})},updateSelected(e,l){if(e)this.selectedChunks.push(l);else{const e=this.selectedChunks.findIndex((e=>e.id===l.id));-1!==e&&this.selectedChunks.splice(e,1)}},removeChunkSentence(e){this.all_chunk_sentence_rows=this.all_chunk_sentence_rows.filter((l=>l.id!==e)),this.filterChunks(),this.showSnackbar("チャンク文/フレーズが移動されました。","success")},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0}},mounted(){this.fetchData()},watch:{search_keyword(){this.filterChunks()}}};const hr=(0,v.A)(ur,[["render",Bn]]);var kr=hr;const pr={class:"text-center"},_r=(0,s.Lk)("h2",{class:"text-center"},"- チャンク文/フレーズ 作成 -",-1),br={key:0,class:"text-center mt-4",style:{color:"grey"}},gr={key:1,class:"text-center mt-4",style:{color:"grey"}},fr=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," チャンク文/フレーズ入力 ",-1),mr={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},vr={class:"d-flex align-center"},wr={class:"d-flex justify-center"},yr=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," 追加一覧 ",-1),xr={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Cr={class:"d-flex justify-center mt-4"},Lr=(0,s.Lk)("span",{class:"headline"},"新規チャンク追加",-1);function Fr(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-textarea"),c=(0,s.g2)("v-autocomplete"),u=(0,s.g2)("v-btn"),h=(0,s.g2)("v-slider"),k=(0,s.g2)("ChunkSentenceWithTrashCompo"),_=(0,s.g2)("v-card-title"),b=(0,s.g2)("v-alert"),g=(0,s.g2)("v-card-text"),f=(0,s.g2)("v-spacer"),m=(0,s.g2)("v-card-actions"),v=(0,s.g2)("v-card"),w=(0,s.g2)("v-dialog"),y=(0,s.g2)("v-snackbar"),x=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(x,{"grid-list-xs":""},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",pr,[(0,s.bF)(o,{height:"14px",width:"14px",type:"mdi",path:r.mdi_lock_pattern},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(r.folder_name),1)]),_r,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",br," チャンク文/フレーズを作成します。 ")):((0,s.uX)(),(0,s.CE)("h4",gr," チャンク文/フレーズを作成します。 ")),(0,s.bF)(d,{class:"mt-4"}),fr,(0,s.Lk)("div",mr,[(0,s.bF)(i,{label:"チャンク文/フレーズ",modelValue:r.form_data.chunk_sentence,"onUpdate:modelValue":l[0]||(l[0]=e=>r.form_data.chunk_sentence=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,{label:"翻訳文",modelValue:r.form_data.translating_sentence,"onUpdate:modelValue":l[1]||(l[1]=e=>r.form_data.translating_sentence=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.Lk)("div",vr,[(0,s.bF)(c,{modelValue:r.form_data.used_chunks,"onUpdate:modelValue":l[2]||(l[2]=e=>r.form_data.used_chunks=e),label:"使用チャンク",items:r.use_chunk_list,"item-value":"value","item-title":"title",multiple:"",clearable:"",chips:"","return-object":!0,"menu-props":{auto:!0,closeOnClick:!1}},null,8,["modelValue","items"]),(0,s.bF)(u,{icon:"",onClick:a.openAddChunkDialog,color:"primary"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{type:"mdi",path:r.mdi_plus},null,8,["path"])])),_:1},8,["onClick"])]),(0,s.bF)(h,{label:"丁寧度(自動計算)",class:"w-90",color:a.politenessColor,modelValue:a.computedPoliteness,"onUpdate:modelValue":l[3]||(l[3]=e=>a.computedPoliteness=e),ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"0.1","tick-size":"4",readonly:""},null,8,["color","modelValue"]),(0,s.bF)(i,{label:"シチュエーション",modelValue:r.form_data.situation,"onUpdate:modelValue":l[4]||(l[4]=e=>r.form_data.situation=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,{label:"備考",modelValue:r.form_data.notes,"onUpdate:modelValue":l[5]||(l[5]=e=>r.form_data.notes=e),rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.Lk)("div",wr,[(0,s.bF)(u,{onClick:a.addContainer,disabled:a.isAddButtonDisabled,width:"30%",color:"primary","prepend-icon":r.mdi_arrow_down_circle},{default:(0,s.k6)((()=>[(0,s.eW)("追加")])),_:1},8,["onClick","disabled","prepend-icon"])])]),yr,(0,s.Lk)("div",xr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.form_data_list,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(k,{key:e.index,props_chunk_sentence_obj:e,props_use_chunk_list:r.use_chunk_list,props_chunk_folder_list:r.chunk_folder_list,onDelete:a.deleteChunkRow,onAddChunk:a.addChunk,onSave:a.saveChangeChunkSentenceRow},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_sentence_obj","props_use_chunk_list","props_chunk_folder_list","onDelete","onAddChunk","onSave"]))],64)))),256)),(0,s.Lk)("div",Cr,[(0,s.bF)(u,{onClick:a.submitFormData,disabled:a.isSubmitButtonDisabled,width:"30%",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("送信")])),_:1},8,["onClick","disabled"])])]),(0,s.bF)(w,{modelValue:r.add_chunk_dialog,"onUpdate:modelValue":l[14]||(l[14]=e=>r.add_chunk_dialog=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(_,null,{default:(0,s.k6)((()=>[Lr])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:r.save_chunk_folder,"onUpdate:modelValue":l[6]||(l[6]=e=>r.save_chunk_folder=e),label:"保存先フォルダ",items:r.chunk_folder_list,"item-value":"value","item-title":"title",clearable:"","return-object":!0},null,8,["modelValue","items"]),(0,s.bF)(i,{modelValue:r.new_chunk_title,"onUpdate:modelValue":l[7]||(l[7]=e=>r.new_chunk_title=e),label:"チャンクタイトル",onInput:a.checkForDuplicate,error:r.duplicate_error,rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue","onInput","error"]),(0,s.bF)(i,{modelValue:r.new_chunk_translation,"onUpdate:modelValue":l[8]||(l[8]=e=>r.new_chunk_translation=e),label:"翻訳文",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(h,{label:"丁寧度",class:"w-90",modelValue:r.new_chunk_politeness,"onUpdate:modelValue":l[9]||(l[9]=e=>r.new_chunk_politeness=e),color:a.newPolitenessColor,ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"1","tick-size":"4"},null,8,["modelValue","color"]),(0,s.bF)(i,{modelValue:r.new_chunk_nuance,"onUpdate:modelValue":l[10]||(l[10]=e=>r.new_chunk_nuance=e),label:"ニュアンス",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,{modelValue:r.new_chunk_situation,"onUpdate:modelValue":l[11]||(l[11]=e=>r.new_chunk_situation=e),label:"シチュエーション",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(i,{modelValue:r.new_chunk_notes,"onUpdate:modelValue":l[12]||(l[12]=e=>r.new_chunk_notes=e),label:"備考",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),r.duplicate_error?((0,s.uX)(),(0,s.Wv)(b,{key:0,type:"error",dense:"",outlined:""},{default:(0,s.k6)((()=>[(0,s.eW)("重複するチャンクがあります。")])),_:1})):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(f),(0,s.bF)(u,{color:"primary",text:"",onClick:a.addNewChunk,disabled:!r.new_chunk_title||!r.save_chunk_folder||r.duplicate_error},{default:(0,s.k6)((()=>[(0,s.eW)("追加")])),_:1},8,["onClick","disabled"]),(0,s.bF)(u,{color:"grey",text:"",onClick:l[13]||(l[13]=e=>r.add_chunk_dialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(y,{modelValue:r.snackbar.show,"onUpdate:modelValue":l[15]||(l[15]=e=>r.snackbar.show=e),color:r.snackbar.color,timeout:r.snackbar.timeout,top:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbar.text),1)])),_:1},8,["modelValue","color","timeout"])])),_:1})}const Vr=e=>((0,s.Qi)("data-v-64385096"),e=e(),(0,s.jt)(),e),jr={style:{"word-break":"break-word",width:"100%","font-size":"14px"},class:"my-3 d-flex"},Wr={name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px"}},Sr={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},Tr={name:"learning",class:"border d-flex flex-wrap align-center"},Dr={name:"learning",class:"border d-flex align-center pa-1"},Er=["innerHTML"],Mr={name:"translating",class:"border d-flex align-center pa-1"},Xr=["innerHTML"],Hr={class:"d-flex",style:{width:"100%"}},zr={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 120px)"}},Ur={name:"learning",class:"border d-flex flex-wrap align-center py-1 pl-1"},Ir={class:"d-flex"},Nr={name:"learning",class:"border d-flex align-center pa-1",style:{width:"50%"}},Ar=["innerHTML"],Rr={name:"translating",class:"border d-flex align-center pa-1",style:{width:"50%"}},Pr=["innerHTML"],Kr={class:"d-flex",style:{width:"100%"}},Or={name:"detail",style:{width:"80px"}},Gr={name:"top",class:"border rounded-te-lg text-end pr-1",style:{height:"20px"}},Br={class:"d-flex",style:{cursor:"pointer",height:"calc(100% - 20px)"}},Qr={class:"d-flex align-center"},Zr=Vr((()=>(0,s.Lk)("span",{class:"headline"},"新規チャンク追加",-1))),Jr={class:"d-flex flex-column px-2"},Yr={class:"d-flex"},qr=Vr((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg border-b rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),$r={class:"border-t-lg border-e-lg rounded-te-lg border-b pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ea=["innerHTML"],la={class:"d-flex"},ta=Vr((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),na={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},sa=["innerHTML"],ra={class:"d-flex mt-4"},aa=Vr((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),oa={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},da={class:"d-flex"},ia=Vr((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),ca={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ua=["innerHTML"],ha={class:"d-flex"},ka=Vr((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),pa={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},_a=["innerHTML"],ba={class:"d-flex"},ga=Vr((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),fa={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ma=["innerHTML"];function va(e,l,t,n,r,a){const o=(0,s.g2)("v-chip"),d=(0,s.g2)("svg-icon"),i=(0,s.g2)("v-card-title"),c=(0,s.g2)("v-divider"),u=(0,s.g2)("v-textarea"),h=(0,s.g2)("v-col"),k=(0,s.g2)("v-autocomplete"),_=(0,s.g2)("v-btn"),b=(0,s.g2)("v-slider"),g=(0,s.g2)("v-row"),f=(0,s.g2)("v-card-text"),m=(0,s.g2)("v-spacer"),v=(0,s.g2)("v-card-actions"),w=(0,s.g2)("v-card"),y=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[22]||(l[22]=e=>r.isHovered=!0),onMouseleave:l[23]||(l[23]=e=>r.isHovered=!1),class:(0,p.C4)([{"hover-effect":r.isHovered},"rounded-lg"]),style:(0,p.Tr)({backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"})},[(0,s.Lk)("div",jr,[(0,s.Lk)("div",Wr,[(0,s.RG)(e.$slots,"index",{},(()=>[(0,s.eW)("インデックス")]),!0)]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",Sr,[(0,s.Lk)("div",Tr,[0!==t.props_chunk_sentence_obj.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_obj.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"x-small",class:"ma-1",key:e.chunk_id,onClick:l=>a.openChunkDetailDialog(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)("設定無し")])),_:1}))]),(0,s.Lk)("div",Dr,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.chunk_sentence)},null,8,Er)]),(0,s.Lk)("div",Mr,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.translating_sentence)},null,8,Xr)]),(0,s.Lk)("div",Hr,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*a.computedPoliteness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",zr,[(0,s.Lk)("div",Ur,[0!==t.props_chunk_sentence_obj.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_obj.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"x-small",class:"ma-1",key:e.chunk_id,onClick:l=>a.openChunkDetailDialog(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)("設定無し")])),_:1}))]),(0,s.Lk)("div",Ir,[(0,s.Lk)("div",Nr,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.chunk_sentence)},null,8,Ar)]),(0,s.Lk)("div",Rr,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.translating_sentence)},null,8,Pr)])]),(0,s.Lk)("div",Kr,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*a.computedPoliteness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",Or,[(0,s.Lk)("div",Gr,(0,p.v_)(t.props_chunk_sentence_obj.pronounced_count),1),(0,s.Lk)("div",Br,[(0,s.bF)(y,{modelValue:r.dialog,"onUpdate:modelValue":l[8]||(l[8]=e=>r.dialog=e),"max-width":"600"},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border d-flex align-center justify-center",style:{width:"50%"}},e,{onClick:l[0]||(l[0]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(d,{type:"mdi",path:r.mdi_file_edit},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("編集")])),_:1}),(0,s.bF)(c),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(g,{dense:""},{default:(0,s.k6)((()=>[(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:r.edited_data.chunk_sentence,"onUpdate:modelValue":l[1]||(l[1]=e=>r.edited_data.chunk_sentence=e),label:"チャンク",rows:"1",counter:"",clear:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:r.edited_data.translating_sentence,"onUpdate:modelValue":l[2]||(l[2]=e=>r.edited_data.translating_sentence=e),label:"翻訳文",rows:"1",counter:"",clear:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Qr,[(0,s.bF)(k,{modelValue:r.edited_data.used_chunks,"onUpdate:modelValue":l[3]||(l[3]=e=>r.edited_data.used_chunks=e),label:"使用チャンク",items:t.props_use_chunk_list,"item-value":"value","item-title":"title",multiple:"",clearable:"",chips:"","return-object":!0,"menu-props":{auto:!0,closeOnClick:!1}},null,8,["modelValue","items"]),(0,s.bF)(_,{icon:"",onClick:a.openAddChunkDialog,color:"primary"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{type:"mdi",path:r.mdi_plus},null,8,["path"])])),_:1},8,["onClick"])])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{modelValue:a.computedPoliteness,"onUpdate:modelValue":l[4]||(l[4]=e=>a.computedPoliteness=e),color:a.politenessColor,label:"丁寧度(自動計算)",class:"w-90",ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"0.1","tick-size":"4",readonly:""},null,8,["modelValue","color"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:r.edited_data.situation,"onUpdate:modelValue":l[5]||(l[5]=e=>r.edited_data.situation=e),label:"シチュエーション",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(h,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:r.edited_data.notes,"onUpdate:modelValue":l[6]||(l[6]=e=>r.edited_data.notes=e),label:"備考",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(c),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(m),(0,s.bF)(_,{text:"Close",variant:"plain",onClick:l[7]||(l[7]=e=>r.dialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:1}),(0,s.bF)(_,{color:"primary",text:"Save",variant:"tonal",onClick:a.saveChanges},{default:(0,s.k6)((()=>[(0,s.eW)("Save")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Lk)("div",{class:"border rounded-be-lg d-flex align-center justify-center",style:{width:"50%"},onClick:l[9]||(l[9]=(...e)=>a.deleteChunk&&a.deleteChunk(...e))},[(0,s.bF)(d,{type:"mdi",path:r.mdi_trash_can_outline},null,8,["path"])])])])]),(0,s.bF)(y,{modelValue:r.add_chunk_dialog,"onUpdate:modelValue":l[18]||(l[18]=e=>r.add_chunk_dialog=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[Zr])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,{modelValue:r.save_chunk_folder,"onUpdate:modelValue":l[10]||(l[10]=e=>r.save_chunk_folder=e),label:"保存先フォルダ",items:t.props_chunk_folder_list,"item-value":"value","item-title":"title",clearable:"","return-object":!0},null,8,["modelValue","items"]),(0,s.bF)(u,{modelValue:r.new_chunk_title,"onUpdate:modelValue":l[11]||(l[11]=e=>r.new_chunk_title=e),label:"チャンク",onInput:a.checkForDuplicate,error:r.duplicate_error,rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue","onInput","error"]),(0,s.bF)(u,{modelValue:r.new_chunk_translation,"onUpdate:modelValue":l[12]||(l[12]=e=>r.new_chunk_translation=e),label:"翻訳文",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(b,{label:"丁寧度(自動計算)",class:"w-90",modelValue:r.new_chunk_politeness,"onUpdate:modelValue":l[13]||(l[13]=e=>r.new_chunk_politeness=e),color:a.newPolitenessColor,ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"1","tick-size":"4"},null,8,["modelValue","color"]),(0,s.bF)(u,{modelValue:r.new_chunk_nuance,"onUpdate:modelValue":l[14]||(l[14]=e=>r.new_chunk_nuance=e),label:"ニュアンス",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:r.new_chunk_situation,"onUpdate:modelValue":l[15]||(l[15]=e=>r.new_chunk_situation=e),label:"シチュエーション",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:r.new_chunk_notes,"onUpdate:modelValue":l[16]||(l[16]=e=>r.new_chunk_notes=e),label:"備考",rows:"1",clearable:"",counter:"","auto-grow":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(m),(0,s.bF)(_,{color:"primary",text:"",onClick:a.addNewChunk,disabled:!r.new_chunk_title||!r.save_chunk_folder||r.duplicate_error},{default:(0,s.k6)((()=>[(0,s.eW)("追加")])),_:1},8,["onClick","disabled"]),(0,s.bF)(_,{color:"grey",text:"",onClick:l[17]||(l[17]=e=>r.add_chunk_dialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(y,{modelValue:r.chunkDetailDialog,"onUpdate:modelValue":l[21]||(l[21]=e=>r.chunkDetailDialog=e),"max-width":"600",style:{"font-size":"12px"}},{default:(0,s.k6)((()=>[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("使用チャンク(詳細)")])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Jr,[(0,s.Lk)("div",Yr,[qr,(0,s.Lk)("div",$r,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.learning_chunk)},null,8,ea)])]),(0,s.Lk)("div",la,[ta,(0,s.Lk)("div",na,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.translating_chunk)},null,8,sa)])]),(0,s.Lk)("div",ra,[aa,(0,s.Lk)("div",oa,[(0,s.bF)(b,{modelValue:r.selectedChunk.value.politeness,"onUpdate:modelValue":l[19]||(l[19]=e=>r.selectedChunk.value.politeness=e),color:a.displayPolitenessColor(r.selectedChunk.value.politeness),"show-ticks":"always",max:"4",step:"1","hide-details":"auto","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",da,[ia,(0,s.Lk)("div",ca,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.nuance)},null,8,ua)])]),(0,s.Lk)("div",ha,[ka,(0,s.Lk)("div",pa,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.situation)},null,8,_a)])]),(0,s.Lk)("div",ba,[ga,(0,s.Lk)("div",fa,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.notes)},null,8,ma)])])])])),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(m),(0,s.bF)(_,{color:"primary",onClick:l[20]||(l[20]=e=>r.chunkDetailDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("閉じる")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],38)}var wa={props:{props_chunk_sentence_obj:Object,props_use_chunk_list:Array,props_chunk_folder_list:Array},components:{SvgIcon:Me.A},data(){return{mdi_file_edit:Xe.vZx,mdi_trash_can_outline:Xe.FhF,mdi_plus:Xe.biz,dialog:!1,add_chunk_dialog:!1,new_chunk_title:"",save_chunk_folder:null,edited_data:{...this.props_chunk_sentence_obj},duplicate_error:!1,new_chunk_translation:"",new_chunk_politeness:2,new_chunk_nuance:"",new_chunk_situation:"",new_chunk_notes:"",isHovered:!1,chunkDetailDialog:!1,selectedChunk:{}}},computed:{computedPoliteness(){return parseFloat(this.calculatePoliteness(this.edited_data.used_chunks)).toFixed(1)},politenessColor(){return Ol(this.computedPoliteness)},newPolitenessColor(){return Ol(this.new_chunk_politeness)}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.dialog=!0,this.edited_data={...this.props_chunk_sentence_obj};const e=[];this.edited_data.used_chunks.forEach((l=>{const t=this.props_use_chunk_list.find((e=>e.value.chunk_id===l.value.chunk_id));t&&e.push(t)})),this.edited_data.used_chunks=e},openAddChunkDialog(){this.add_chunk_dialog=!0,this.new_chunk_title="",this.new_chunk_translation="",this.save_chunk_folder=null,this.duplicate_error=!1},checkForDuplicate(){const e=this.edited_data.used_chunks.some((e=>e.title===this.new_chunk_title));this.duplicate_error=e},addNewChunk(){if(this.new_chunk_title&&this.save_chunk_folder&&!this.duplicate_error){const e={title:this.new_chunk_title,value:{folder_id:this.save_chunk_folder.value.folder_id,chunk_id:"",learning_chunk:this.new_chunk_title,translating_chunk:this.new_chunk_translation,politeness:this.new_chunk_politeness,nuance:this.new_chunk_nuance,situation:this.new_chunk_situation,notes:this.new_chunk_notes}},l=new Proxy(e,{});this.edited_data.used_chunks.push(l),this.$emit("addChunk",l),this.new_chunk_title="",this.new_chunk_translation="",this.save_chunk_folder=null,this.new_chunk_politeness=2,this.new_chunk_nuance="",this.new_chunk_situation="",this.new_chunk_notes="",this.add_chunk_dialog=!1}},saveChanges(){this.edited_data.politeness=this.computedPoliteness,this.$emit("save",this.edited_data),this.dialog=!1},deleteChunk(){this.$emit("delete",this.props_chunk_sentence_obj)},calculatePoliteness(e){if(!e||0===e.length)return 0;const l=e.reduce(((e,l)=>e+(l.value.politeness||0)),0);return(l/e.length).toFixed(1)},openChunkDetailDialog(e){this.selectedChunk=e,this.chunkDetailDialog=!0},displayPolitenessColor(e){return Ol(e)}}};const ya=(0,v.A)(wa,[["render",va],["__scopeId","data-v-64385096"]]);var xa=ya,Ca={components:{ChunkSentenceWithTrashCompo:xa,SvgIcon:Me.A},data(){return{mdi_arrow_down_circle:Xe.UTs,mdi_lock_pattern:Xe.izq,mdi_plus:Xe.biz,form_data:{index:0,chunk_sentence:"",translating_sentence:"",used_chunks:[],situation:"",notes:"",politeness:0},use_chunk_list:[],new_chunks:[],chunk_folder_list:[],folder_name:"",form_data_list:[],fid:this.$route.query.fid,index:0,add_chunk_dialog:!1,new_chunk_title:"",new_chunk_translation:"",new_chunk_politeness:2,new_chunk_nuance:"",new_chunk_situation:"",new_chunk_notes:"",save_chunk_folder:null,duplicate_error:!1,snackbar:{show:!1,text:"",color:"",timeout:3e3}}},methods:{addContainer(){this.form_data.politeness=parseFloat(this.computedPoliteness),this.form_data.index=this.index++,this.form_data_list.push({...this.form_data}),this.form_data={chunk_sentence:"",translating_sentence:"",used_chunks:[],situation:"",notes:"",politeness:0},this.showSnackbar("チャンク文/フレーズを追加しました。","success")},saveChangeChunkSentenceRow(e){const l=this.form_data_list.findIndex((l=>l.index===e.index));-1!==l&&this.form_data_list.splice(l,1,e)},deleteChunkRow(e){const l=this.form_data_list.indexOf(e);-1!==l&&this.form_data_list.splice(l,1),this.showSnackbar("チャンク文/フレーズを削除しました。","info")},async submitFormData(){const e=JSON.stringify({form_data_list:this.form_data_list,new_chunks:this.new_chunks});try{const l=await fetch(`/api/chunk_sentences/list/create?fid=${this.fid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!l.ok)throw new Error("Network response was not ok");this.showSnackbar("データが正常に送信されました。","success"),window.location.href=`/chunk_sentences/list?fid=${this.fid}`}catch(l){this.showSnackbar("データの送信中にエラーが発生しました。","error"),console.error("Error submitting data:",l)}},checkForDuplicate(){this.duplicate_error=this.use_chunk_list.some((e=>e.title===this.new_chunk_title))},calculatePoliteness(e){if(!e||0===e.length)return 0;const l=e.reduce(((e,l)=>e+(l.value.politeness||0)),0);return(l/e.length).toFixed(1)},addChunk(e){this.use_chunk_list.push(e),this.new_chunks.push(e)},addNewChunk(){if(this.new_chunk_title&&this.save_chunk_folder&&!this.duplicate_error){const e={title:this.new_chunk_title,value:{chunk_id:"",folder_id:this.save_chunk_folder.value.folder_id,learning_chunk:this.new_chunk_title,translating_chunk:this.new_chunk_translation,politeness:this.new_chunk_politeness,nuance:this.new_chunk_nuance,situation:this.new_chunk_situation,notes:this.new_chunk_notes}};this.form_data.used_chunks.push(e),this.use_chunk_list.push(e),this.new_chunks.push(e),this.new_chunk_title="",this.new_chunk_translation="",this.save_chunk_folder=null,this.new_chunk_politeness=2,this.new_chunk_nuance="",this.new_chunk_situation="",this.new_chunk_notes="",this.add_chunk_dialog=!1,this.showSnackbar("新しいチャンクを追加しました。","success")}else this.showSnackbar("新しいチャンクの追加に失敗しました。","error")},openAddChunkDialog(){this.add_chunk_dialog=!0,this.new_chunk_title="",this.new_chunk_translation="",this.save_chunk_folder=null,this.duplicate_error=!1},async fetchChunkFolderList(){try{const e=await fetch("/api/chunk_folders/list?fclass=1",{method:"GET"}),l=await e.json();this.chunk_folder_list=l.map((e=>({title:e.name,value:{folder_id:e.id,folder_name:e.name}})))}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンクフォルダの取得に失敗しました。","error")}},async fetchFolderName(){try{const e=await fetch(`/api/folders/name?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.name?(this.folder_name=l.name,await this.fetchChunkFolderList()):(console.error("Folder not found"),this.showSnackbar("フォルダが見つかりません。","error"))}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダ名の取得に失敗しました。","error")}},async fetchChunks(){try{const e=await fetch("/api/chunks/list",{method:"GET"}),l=await e.json();this.use_chunk_list=l.map((e=>({title:e.learning_chunk,value:{chunk_id:e.id,learning_chunk:e.learning_chunk,translating_chunk:e.translating_chunk,pronounced_count:e.pronounced_count,politeness:e.politeness,nuance:e.nuance,situation:e.situation,notes:e.notes,create_date:e.create_date,update_date:e.update_date}})))}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンクの取得に失敗しました。","error")}},async fetchData(){try{await this.fetchFolderName(),await this.fetchChunks()}catch(e){console.error("Fetch data error:",e),this.showSnackbar("データの取得に失敗しました。","error")}},showSnackbar(e,l){this.snackbar.text=e,this.snackbar.color=l,this.snackbar.show=!0}},async mounted(){await this.fetchData()},computed:{isAddButtonDisabled(){return!this.form_data.chunk_sentence},isSubmitButtonDisabled(){return 0===this.form_data_list.length},computedPoliteness(){return parseFloat(this.calculatePoliteness(this.form_data.used_chunks)).toFixed(1)},politenessColor(){return Ol(this.computedPoliteness)},newPolitenessColor(){return Ol(this.new_chunk_politeness)}}};const La=(0,v.A)(Ca,[["render",Fr]]);var Fa=La;const Va={class:"text-center"},ja=(0,s.Lk)("h2",{class:"text-center"},"- チャンク文/フレーズ 編集 -",-1),Wa={key:0,class:"text-center mt-4",style:{color:"grey"}},Sa={key:1,class:"text-center mt-4",style:{color:"grey"}},Ta=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b text-center bg-primary",style:{"font-size":"16px"}}," チャンク文/フレーズ一覧 ",-1),Da={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Ea=(0,s.Lk)("div",{class:"border-s-lg border-e-lg border-t-lg border-b rounded-t-lg mt-4 text-center bg-primary",style:{"font-size":"16px"}}," 削除一覧 ",-1),Ma={class:"border-s-lg border-e-lg border-b-lg rounded-b-lg pa-4 mb-4"},Xa={class:"d-flex justify-center"};function Ha(e,l,t,n,r,a){const o=(0,s.g2)("svg-icon"),d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-text-field"),c=(0,s.g2)("ChunkSentenceWithTrashCompo"),u=(0,s.g2)("ChunkSentenceWithRedoCompo"),h=(0,s.g2)("v-btn"),k=(0,s.g2)("v-snackbar"),_=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(_,null,{default:(0,s.k6)((()=>[(0,s.Lk)("h5",Va,[(0,s.bF)(o,{height:"14px",width:"14px",type:"mdi",path:r.mdi_lock_pattern},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(r.folder_name),1)]),ja,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",Wa," 登録したチャンク文/フレーズを編集（登録内容の変更・削除等）します。 ")):((0,s.uX)(),(0,s.CE)("h4",Sa," 登録したチャンク文/フレーズを編集（登録内容の変更・削除等）します。 ")),(0,s.bF)(d,{class:"mt-4"}),(0,s.bF)(i,{class:"mt-4",modelValue:r.search_keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>r.search_keyword=e),"single-line":"",density:"compact",label:"クイック検索",outlined:"","hide-details":"",clearable:"","prepend-inner-icon":r.mdi_magnify},null,8,["modelValue","prepend-inner-icon"]),Ta,(0,s.Lk)("div",Da,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filtered_chunk_sentences,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(c,{props_chunk_sentence_obj:e,key:e.id,props_use_chunk_list:r.use_chunk_list,props_chunk_folder_list:r.chunk_folder_list,onSave:a.saveChangeChunkSentenceRow,onDelete:a.deleteChunkRow,onAddChunk:a.addChunk,"onUpdate:selected":a.updateSelected},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_sentence_obj","props_use_chunk_list","props_chunk_folder_list","onSave","onDelete","onAddChunk","onUpdate:selected"]))],64)))),256))]),Ea,(0,s.Lk)("div",Ma,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.delete_chunk_sentence_rows,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(u,{props_chunk_sentence_obj:e,key:e.id,onRedo:a.redoChunkRow,"onUpdate:selected":a.updateSelected},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_sentence_obj","onRedo","onUpdate:selected"]))],64)))),256))]),(0,s.Lk)("div",Xa,[(0,s.bF)(h,{onClick:a.submitFormData,disabled:!a.isDataChanged,width:"30%",class:"my-4",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("保存")])),_:1},8,["onClick","disabled"])]),(0,s.bF)(k,{modelValue:r.snackbar,"onUpdate:modelValue":l[2]||(l[2]=e=>r.snackbar=e),timeout:r.snackbarTimeout,color:r.snackbarColor},{action:(0,s.k6)((({attrs:e})=>[(0,s.bF)(h,(0,s.v6)({color:"white",text:"",onClick:l[1]||(l[1]=e=>r.snackbar=!1)},e),{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:2},1040)])),default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(r.snackbarMessage)+" ",1)])),_:1},8,["modelValue","timeout","color"])])),_:1})}const za=e=>((0,s.Qi)("data-v-c28ab8d8"),e=e(),(0,s.jt)(),e),Ua={style:{"word-break":"break-word",width:"100%","font-size":"14px"},class:"my-3 d-flex"},Ia={name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px"}},Na={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},Aa={name:"learning",class:"border d-flex flex-wrap align-center"},Ra={name:"learning",class:"border d-flex align-center pa-1"},Pa=["innerHTML"],Ka={name:"translating",class:"border d-flex align-center pa-1"},Oa=["innerHTML"],Ga={class:"d-flex",style:{width:"100%"}},Ba={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 120px)"}},Qa={name:"learning",class:"border d-flex flex-wrap align-center py-1 pl-1"},Za={class:"d-flex"},Ja={name:"learning",class:"border d-flex align-center pa-1",style:{width:"50%"}},Ya=["innerHTML"],qa={name:"translating",class:"border d-flex align-center pa-1",style:{width:"50%"}},$a=["innerHTML"],eo={class:"d-flex",style:{width:"100%"}},lo={name:"detail",style:{width:"80px"}},to={name:"top",class:"border rounded-te-lg text-end pr-1",style:{height:"20px"}},no={class:"d-flex",style:{cursor:"pointer",height:"calc(100% - 20px)"}},so={class:"d-flex flex-column px-2"},ro={class:"d-flex"},ao=za((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 使用チャンク ",-1))),oo={class:"border-t-lg border-e-lg rounded-te-lg d-flex flex-wrap align-center",style:{width:"calc(100% - 110px)"}},io={class:"d-flex"},co=za((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" チャンク文/"),(0,s.Lk)("br"),(0,s.eW)("フレーズ ")],-1))),uo={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ho=["innerHTML"],ko={class:"d-flex"},po=za((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),_o={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},bo=["innerHTML"],go={class:"d-flex mt-4"},fo=za((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" 丁寧度"),(0,s.Lk)("br"),(0,s.eW)("(自動計算) ")],-1))),mo={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},vo={class:"d-flex"},wo=za((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),yo={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},xo=["innerHTML"],Co={class:"d-flex"},Lo=za((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Fo={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Vo=["innerHTML"],jo={class:"d-flex flex-column px-2"},Wo={class:"d-flex"},So=za((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg border-b rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),To={class:"border-t-lg border-e-lg rounded-te-lg border-b pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Do=["innerHTML"],Eo={class:"d-flex"},Mo=za((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),Xo={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Ho=["innerHTML"],zo={class:"d-flex mt-4"},Uo=za((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),Io={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},No={class:"d-flex"},Ao=za((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),Ro={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Po=["innerHTML"],Ko={class:"d-flex"},Oo=za((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),Go={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Bo=["innerHTML"],Qo={class:"d-flex"},Zo=za((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Jo={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Yo=["innerHTML"];function qo(e,l,t,n,r,a){const o=(0,s.g2)("v-chip"),d=(0,s.g2)("svg-icon"),i=(0,s.g2)("v-card-title"),c=(0,s.g2)("v-slider"),u=(0,s.g2)("v-spacer"),h=(0,s.g2)("v-btn"),k=(0,s.g2)("v-card-actions"),_=(0,s.g2)("v-card"),b=(0,s.g2)("v-dialog"),g=(0,s.g2)("v-card-text");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[8]||(l[8]=e=>r.isHovered=!0),onMouseleave:l[9]||(l[9]=e=>r.isHovered=!1),class:(0,p.C4)([{"hover-effect":r.isHovered},"rounded-lg"]),style:(0,p.Tr)({backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"})},[(0,s.Lk)("div",Ua,[(0,s.Lk)("div",Ia,[(0,s.RG)(e.$slots,"index",{},(()=>[(0,s.eW)("インデックス")]),!0)]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",Na,[(0,s.Lk)("div",Aa,[0!==t.props_chunk_sentence_obj.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_obj.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"x-small",class:"ma-1",key:e.chunk_id,onClick:l=>a.openChunkDetailDialog(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))]),(0,s.Lk)("div",Ra,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.chunk_sentence)},null,8,Pa)]),(0,s.Lk)("div",Ka,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.translating_sentence)},null,8,Oa)]),(0,s.Lk)("div",Ga,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*a.computedPoliteness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",Ba,[(0,s.Lk)("div",Qa,[0!==t.props_chunk_sentence_obj.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_obj.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"x-small",class:"ma-1",key:e.chunk_id,onClick:l=>a.openChunkDetailDialog(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))]),(0,s.Lk)("div",Za,[(0,s.Lk)("div",Ja,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.chunk_sentence)},null,8,Ya)]),(0,s.Lk)("div",qa,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_obj.translating_sentence)},null,8,$a)])]),(0,s.Lk)("div",eo,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*a.computedPoliteness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",lo,[(0,s.Lk)("div",to,(0,p.v_)(t.props_chunk_sentence_obj.pronounced_count),1),(0,s.Lk)("div",no,[(0,s.bF)(b,{modelValue:r.dialog,"onUpdate:modelValue":l[3]||(l[3]=e=>r.dialog=e),"max-width":"600",style:{"font-size":"12px"}},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border d-flex align-center justify-center",style:{width:"50%"}},e,{onClick:l[0]||(l[0]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(d,{type:"mdi",path:r.mdi_menu},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("詳細")])),_:1}),(0,s.Lk)("div",so,[(0,s.Lk)("div",ro,[ao,(0,s.Lk)("div",oo,[0!==r.local_chunk_sentence_obj.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(r.local_chunk_sentence_obj.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(o,{size:"small",class:"ma-1",onClick:l=>a.openChunkDetailDialog(e),key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(o,{key:1,class:"ma-1",color:"grey",size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))])]),(0,s.Lk)("div",io,[co,(0,s.Lk)("div",uo,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.chunk_sentence)},null,8,ho)])]),(0,s.Lk)("div",ko,[po,(0,s.Lk)("div",_o,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.translating_sentence)},null,8,bo)])]),(0,s.Lk)("div",go,[fo,(0,s.Lk)("div",mo,[(0,s.bF)(c,{modelValue:a.computedPoliteness,"onUpdate:modelValue":l[1]||(l[1]=e=>a.computedPoliteness=e),color:a.politenessColor,ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"0.1","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",vo,[wo,(0,s.Lk)("div",yo,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.situation)},null,8,xo)])]),(0,s.Lk)("div",Co,[Lo,(0,s.Lk)("div",Fo,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_obj.notes)},null,8,Vo)])])]),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(u),(0,s.bF)(h,{text:"Close",variant:"plain",onClick:l[2]||(l[2]=e=>r.dialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Lk)("div",{class:"border rounded-be-lg d-flex align-center justify-center",style:{width:"50%"},onClick:l[4]||(l[4]=(...e)=>a.redoChunkSentence&&a.redoChunkSentence(...e))},[(0,s.bF)(d,{type:"mdi",path:r.mdi_arrow_u_right_top_bold},null,8,["path"])])])])]),(0,s.bF)(b,{modelValue:r.chunkDetailDialog,"onUpdate:modelValue":l[7]||(l[7]=e=>r.chunkDetailDialog=e),"max-width":"600",style:{"font-size":"12px"}},{default:(0,s.k6)((()=>[(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("使用チャンク(詳細)")])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",jo,[(0,s.Lk)("div",Wo,[So,(0,s.Lk)("div",To,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.learning_chunk)},null,8,Do)])]),(0,s.Lk)("div",Eo,[Mo,(0,s.Lk)("div",Xo,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.translating_chunk)},null,8,Ho)])]),(0,s.Lk)("div",zo,[Uo,(0,s.Lk)("div",Io,[(0,s.bF)(c,{modelValue:r.selectedChunk.value.politeness,"onUpdate:modelValue":l[5]||(l[5]=e=>r.selectedChunk.value.politeness=e),color:a.displayPolitenessColor(r.selectedChunk.value.politeness),"show-ticks":"always",max:"4",step:"1","hide-details":"auto","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",No,[Ao,(0,s.Lk)("div",Ro,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.nuance)},null,8,Po)])]),(0,s.Lk)("div",Ko,[Oo,(0,s.Lk)("div",Go,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.situation)},null,8,Bo)])]),(0,s.Lk)("div",Qo,[Zo,(0,s.Lk)("div",Jo,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.notes)},null,8,Yo)])])])])),_:1}),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(u),(0,s.bF)(h,{color:"primary",onClick:l[6]||(l[6]=e=>r.chunkDetailDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("閉じる")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],38)}var $o={props:{props_chunk_sentence_obj:Object},components:{SvgIcon:Me.A},data(){return{mdi_menu:Xe.ExW,mdi_arrow_u_right_top_bold:Xe.hcN,dialog:!1,local_chunk_sentence_obj:{...this.props_chunk_sentence_obj},isHovered:!1,chunkDetailDialog:!1,selectedChunk:{}}},watch:{props_chunk_sentence_obj:{handler(e){this.local_chunk_sentence_obj={...e}},deep:!0,immediate:!0}},computed:{computedPoliteness(){return parseFloat(this.calculatePoliteness(this.local_chunk_sentence_obj.used_chunks)).toFixed(1)},politenessColor(){return Ol(this.computedPoliteness)}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.dialog=!0,this.local_chunk_sentence_obj={...this.props_chunk_sentence_obj}},openChunkDetailDialog(e){this.selectedChunk=e,this.chunkDetailDialog=!0},redoChunkSentence(){this.$emit("redo",this.props_chunk_sentence_obj)},calculatePoliteness(e){if(!e||0===e.length)return 0;const l=e.reduce(((e,l)=>e+(l.value.politeness||0)),0);return(l/e.length).toFixed(1)},displayPolitenessColor(e){return Ol(e)}}};const ed=(0,v.A)($o,[["render",qo],["__scopeId","data-v-c28ab8d8"]]);var ld=ed,td={components:{ChunkSentenceWithRedoCompo:ld,ChunkSentenceWithTrashCompo:xa,SvgIcon:Me.A},data(){return{mdi_magnify:Xe.U4M,mdi_lock_pattern:Xe.izq,all_chunk_sentence_rows:[],filtered_chunk_sentences:[],edit_chunk_sentence_rows:[],delete_chunk_sentence_rows:[],new_chunks:[],selectedChunks:[],fid:this.$route.query.fid,folder_name:"",use_chunk_list:[],chunk_folder_list:[],search_keyword:"",save_change_executed:!1,snackbar:!1,snackbarMessage:"",snackbarColor:"success",snackbarTimeout:3e3}},computed:{isDataChanged(){return this.save_change_executed||this.delete_chunk_sentence_rows.length>0}},methods:{filterChunks(){this.filtered_chunk_sentences=this.all_chunk_sentence_rows.filter((e=>!this.search_keyword||(e.chunk_sentence.includes(this.search_keyword)||e.translating_sentence.includes(this.search_keyword)||e.situation.includes(this.search_keyword)||e.notes.includes(this.search_keyword))))},saveChangeChunkSentenceRow(e){const l=this.all_chunk_sentence_rows.findIndex((l=>l.id===e.id)),t=this.filtered_chunk_sentences.findIndex((l=>l.id===e.id)),n=this.edit_chunk_sentence_rows.findIndex((l=>l.id===e.id));-1===l&&-1===t||(this.all_chunk_sentence_rows.splice(l,1,e),this.filtered_chunk_sentences.splice(t,1,e),-1!==n?this.edit_chunk_sentence_rows.splice(n,1,e):this.edit_chunk_sentence_rows.push(e),this.filterChunks(),this.save_change_executed=!0,this.showSnackbar("チャンク文/フレーズの編集内容を保存しました。","success"))},deleteChunkRow(e){const l=this.all_chunk_sentence_rows.indexOf(e),t=this.filtered_chunk_sentences.indexOf(e),n=this.edit_chunk_sentence_rows.indexOf(e);-1===l&&-1===t&&-1===n||(this.all_chunk_sentence_rows.splice(l,1),this.filtered_chunk_sentences.splice(t,1),this.edit_chunk_sentence_rows.splice(n,1),this.delete_chunk_sentence_rows.push(e),this.filterChunks(),this.showSnackbar("チャンク文/フレーズを削除一覧に移動しました。","success"))},redoChunkRow(e){const l=this.delete_chunk_sentence_rows.indexOf(e);-1!==l&&(this.delete_chunk_sentence_rows.splice(l,1),this.all_chunk_sentence_rows.push(e),this.filtered_chunk_sentences.push(e),this.edit_chunk_sentence_rows.push(e)),this.filterChunks(),this.showSnackbar("チャンク文/フレーズを元に戻しました。","success")},addChunk(e){this.use_chunk_list.push(e),this.new_chunks.push(e)},async submitFormData(){const e=JSON.stringify({editDataList:this.edit_chunk_sentence_rows,deleteDataList:this.delete_chunk_sentence_rows,newChunks:this.new_chunks});try{const l=await fetch(`/api/chunk_sentences/list/edit?fid=${this.fid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!l.ok)throw new Error("Network response was not ok");const t=await l.json();console.log("Data submitted successfully:",t),this.showSnackbar("データが送信されました。","success"),window.location.href=`/chunk_sentences/list?fid=${this.fid}`}catch(l){console.error("Error submitting data:",l),this.showSnackbar("データの送信に失敗しました。","error")}},async fetchChunkFolderList(){try{const e=await fetch("/api/chunk_folders/list?fclass=1",{method:"GET"}),l=await e.json();this.chunk_folder_list=l.map((e=>({title:e.name,value:{folder_id:e.id,folder_name:e.name}})))}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダリストの読み込みに失敗しました。","error")}},async fetchFolderName(){try{const e=await fetch(`/api/folders/name?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.name?this.folder_name=l.name:(console.error("Folder not found"),this.showSnackbar("フォルダが見つかりません。","error"))}catch(e){console.error("Fetch error:",e),this.showSnackbar("フォルダ名の読み込みに失敗しました。","error")}},async fetchChunkSentences(){try{const e=await fetch(`/api/chunk_sentences/list?fid=${this.fid}`,{method:"GET"}),l=await e.json();l.length>0&&l[0].chunk_sentences?this.all_chunk_sentence_rows=l[0].chunk_sentences:this.all_chunk_sentence_rows=[],this.filterChunks()}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンク文/フレーズの読み込みに失敗しました。","error")}},async fetchChunks(){try{const e=await fetch("/api/chunks/list",{method:"GET"}),l=await e.json();this.use_chunk_list=l.map((e=>({title:e.learning_chunk,value:{chunk_id:e.id,learning_chunk:e.learning_chunk,translating_chunk:e.translating_chunk,pronounced_count:e.pronounced_count,politeness:e.politeness,nuance:e.nuance,situation:e.situation,notes:e.notes,create_date:e.create_date,update_date:e.update_date}})))}catch(e){console.error("Fetch error:",e),this.showSnackbar("チャンクの読み込みに失敗しました。","error")}},async fetchData(){try{await this.fetchFolderName(),await this.fetchChunkSentences(),await this.fetchChunks(),await this.fetchChunkFolderList()}catch(e){console.error("Fetch data error:",e),this.showSnackbar("データの読み込みに失敗しました。","error")}},updateSelected(e,l){if(e)this.selectedChunks.push(l);else{const e=this.selectedChunks.findIndex((e=>e.id===l.id));-1!==e&&this.selectedChunks.splice(e,1)}},showSnackbar(e,l){this.snackbarMessage=e,this.snackbarColor=l,this.snackbar=!0}},async mounted(){await this.fetchData()},watch:{search_keyword(){this.filterChunks()}}};const nd=(0,v.A)(td,[["render",Ha]]);var sd=nd;const rd=(0,s.Lk)("h5",{class:"text-center"},"Speak More",-1),ad=(0,s.Lk)("h2",{class:"text-center"},"- 選択 -",-1),od={key:0,class:"text-center mt-4",style:{color:"grey"}},dd={key:1,class:"text-center mt-4",style:{color:"grey"}},id={class:"d-flex justify-space-evenly my-2 py-2"},cd={class:"d-flex justify-space-between align-center"},ud=(0,s.Lk)("span",{class:"headline"},"ランダム実践設定",-1);function hd(e,l,t,r,a,o){const d=(0,s.g2)("v-divider"),i=(0,s.g2)("v-btn"),c=(0,s.g2)("v-text-field"),u=(0,s.g2)("v-icon"),h=(0,s.g2)("ChunkSentenceSelectCompo"),k=(0,s.g2)("v-expand-transition"),_=(0,s.g2)("v-card-title"),b=(0,s.g2)("v-select"),g=(0,s.g2)("v-card-text"),f=(0,s.g2)("v-spacer"),m=(0,s.g2)("v-card-actions"),v=(0,s.g2)("v-card"),w=(0,s.g2)("v-dialog"),y=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(y,null,{default:(0,s.k6)((()=>[rd,ad,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",od," 以下一覧から発声実践するチャンク文/フレーズを選択してください。 ")):((0,s.uX)(),(0,s.CE)("h4",dd," 以下一覧から発声実践するチャンク文/フレーズを選択してください。 ")),(0,s.bF)(d,{class:"mt-4"}),(0,s.Lk)("div",id,[(0,s.bF)(i,{onClick:o.goToPractice,width:"45%",class:"border",color:"primary",disabled:0===a.selected_chunks.length},{default:(0,s.k6)((()=>[(0,s.eW)("実践（選択）")])),_:1},8,["onClick","disabled"]),(0,s.bF)(i,{onClick:o.openRandomDialog,width:"45%","prepend-icon":a.mdi_random,class:"border",color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("実践（ランダム）")])),_:1},8,["onClick","prepend-icon"])]),(0,s.bF)(c,{modelValue:a.search_keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>a.search_keyword=e),"single-line":"",density:"compact",label:"クイック検索",outlined:"","hide-details":"",clearable:"","prepend-inner-icon":a.mdi_magnify},null,8,["modelValue","prepend-inner-icon"]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.filtered_chunk_sentences,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"border-lg rounded-lg pa-4 my-2",key:e.folder_id},[(0,s.Lk)("div",cd,[(0,s.Lk)("h3",null,(0,p.v_)(e.folder_name),1),(0,s.bF)(i,{icon:"",onClick:l=>o.toggleFolderVisibility(e.folder_id)},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(a.folderVisibility[e.folder_id]?a.mdiChevronUp:a.mdiChevronDown),1)])),_:2},1024)])),_:2},1032,["onClick"])]),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.chunk_sentences,((e,l)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(h,{props_chunk_sentence_row:e,index:l+1,key:e.id,"onUpdate:selected":o.updateSelected},{index:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(l+1),1)])),_:2},1032,["props_chunk_sentence_row","index","onUpdate:selected"]))],64)))),256))],512),[[n.aG,a.folderVisibility[e.folder_id]]])])),_:2},1024)])))),128)),(0,s.bF)(w,{modelValue:a.randomDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>a.randomDialog=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(_,null,{default:(0,s.k6)((()=>[ud])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(b,{modelValue:a.selectedFolderId,"onUpdate:modelValue":l[1]||(l[1]=e=>a.selectedFolderId=e),items:a.folderOptions,label:"フォルダ選択","item-title":"name","item-value":"id"},null,8,["modelValue","items"]),(0,s.bF)(c,{modelValue:a.randomCount,"onUpdate:modelValue":l[2]||(l[2]=e=>a.randomCount=e),type:"number",label:"選択するチャンク文の数",min:"1",max:o.totalChunkSentenceCount},null,8,["modelValue","max"])])),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(f),(0,s.bF)(i,{color:"grey",text:"",onClick:l[3]||(l[3]=e=>a.randomDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("キャンセル")])),_:1}),(0,s.bF)(i,{color:"primary",text:"",onClick:o.startRandomPractice},{default:(0,s.k6)((()=>[(0,s.eW)("開始")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var kd=t(782);const pd=e=>((0,s.Qi)("data-v-5935bfcf"),e=e(),(0,s.jt)(),e),_d={style:{"word-break":"break-word",width:"100%","font-size":"14px"},class:"my-3 d-flex"},bd={key:0,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},gd={name:"learning",class:"border d-flex flex-wrap align-center"},fd={name:"learning",class:"border d-flex align-center pa-1"},md=["innerHTML"],vd={name:"translating",class:"border d-flex align-center pa-1"},wd=["innerHTML"],yd={class:"d-flex",style:{width:"100%"}},xd={key:1,name:"body",class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},Cd={name:"learning",class:"border d-flex flex-wrap align-center py-1 pl-1"},Ld={class:"d-flex"},Fd={name:"learning",class:"border d-flex align-center pa-1",style:{width:"50%"}},Vd=["innerHTML"],jd={name:"translating",class:"border d-flex align-center pa-1",style:{width:"50%"}},Wd=["innerHTML"],Sd={class:"d-flex",style:{width:"100%"}},Td={name:"detail",style:{width:"80px"}},Dd={name:"top",class:"border rounded-te-lg text-end pr-1",style:{height:"20px"}},Ed={class:"d-flex flex-column px-2"},Md={class:"d-flex"},Xd=pd((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 使用チャンク ",-1))),Hd={class:"border-t-lg border-e-lg rounded-te-lg d-flex flex-wrap align-center",style:{width:"calc(100% - 110px)"}},zd={class:"d-flex"},Ud=pd((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" チャンク文/"),(0,s.Lk)("br"),(0,s.eW)("フレーズ ")],-1))),Id={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Nd=["innerHTML"],Ad={class:"d-flex"},Rd=pd((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),Pd={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Kd=["innerHTML"],Od={class:"d-flex mt-4"},Gd=pd((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" 丁寧度"),(0,s.Lk)("br")],-1))),Bd={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},Qd={class:"d-flex"},Zd=pd((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),Jd={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Yd=["innerHTML"],qd={class:"d-flex"},$d=pd((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),ei={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},li=["innerHTML"],ti={class:"d-flex flex-column px-2"},ni={class:"d-flex"},si=pd((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg border-b rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),ri={class:"border-t-lg border-e-lg border-b rounded-te-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ai=["innerHTML"],oi={class:"d-flex"},di=pd((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),ii={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ci=["innerHTML"],ui={class:"d-flex mt-4"},hi=pd((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),ki={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},pi={class:"d-flex"},_i=pd((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),bi={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},gi=["innerHTML"],fi={class:"d-flex"},mi=pd((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),vi={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},wi=["innerHTML"],yi={class:"d-flex"},xi=pd((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Ci={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Li=["innerHTML"];function Fi(e,l,t,n,r,a){const o=(0,s.g2)("v-checkbox"),d=(0,s.g2)("v-chip"),i=(0,s.g2)("svg-icon"),c=(0,s.g2)("v-card-title"),u=(0,s.g2)("v-slider"),h=(0,s.g2)("v-spacer"),k=(0,s.g2)("v-btn"),_=(0,s.g2)("v-card-actions"),b=(0,s.g2)("v-card"),g=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.CE)("div",{onMouseover:l[9]||(l[9]=e=>r.isHovered=!0),onMouseleave:l[10]||(l[10]=e=>r.isHovered=!1),class:(0,p.C4)([{"hover-effect":r.isHovered},"rounded-lg"]),style:(0,p.Tr)({backgroundColor:r.isHovered?"rgba(55,55,55,1)":"rgba(33,33,33,1)"})},[(0,s.Lk)("div",_d,[(0,s.Lk)("div",{name:"index",class:"border rounded-s-lg d-flex align-center justify-center",style:{width:"40px"},onClick:l[1]||(l[1]=(...e)=>a.toggleSelection&&a.toggleSelection(...e))},[(0,s.bF)(o,{modelValue:r.checked,"onUpdate:modelValue":l[0]||(l[0]=e=>r.checked=e),"hide-details":"",dense:""},null,8,["modelValue"])]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("div",bd,[(0,s.Lk)("div",gd,[0!==t.props_chunk_sentence_row.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_row.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(d,{size:"x-small",class:"ma-1",onClick:l=>a.openChunkDetailDialog(e),key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(d,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))]),(0,s.Lk)("div",fd,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.chunk_sentence)},null,8,md)]),(0,s.Lk)("div",vd,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.translating_sentence)},null,8,wd)]),(0,s.Lk)("div",yd,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*t.props_chunk_sentence_row.politeness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])):((0,s.uX)(),(0,s.CE)("div",xd,[(0,s.Lk)("div",Cd,[0!==t.props_chunk_sentence_row.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.props_chunk_sentence_row.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(d,{size:"x-small",class:"ma-1",onClick:l=>a.openChunkDetailDialog(e),key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(d,{key:1,class:"ma-1",color:"grey",size:"x-small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))]),(0,s.Lk)("div",Ld,[(0,s.Lk)("div",Fd,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.chunk_sentence)},null,8,Vd)]),(0,s.Lk)("div",jd,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(t.props_chunk_sentence_row.translating_sentence)},null,8,Wd)])]),(0,s.Lk)("div",Sd,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(40,(e=>(0,s.Lk)("div",{key:e,style:(0,p.Tr)({width:"2.5%",backgroundColor:e<=10*t.props_chunk_sentence_row.politeness?a.politenessColor:"rgba(33,33,33,1)"}),class:"pt-1 border-b"},null,4))),64))])])),(0,s.Lk)("div",Td,[(0,s.Lk)("div",Dd,(0,p.v_)(t.props_chunk_sentence_row.pronounced_count),1),(0,s.bF)(g,{modelValue:r.dialog,"onUpdate:modelValue":l[5]||(l[5]=e=>r.dialog=e),"max-width":"600",style:{"font-size":"12px"}},{activator:(0,s.k6)((({props:e})=>[(0,s.Lk)("div",(0,s.v6)({name:"bottom",class:"border rounded-be-lg d-flex align-center justify-center",style:{cursor:"pointer",height:"calc(100% - 20px)"}},e,{onClick:l[2]||(l[2]=(...e)=>a.openDialog&&a.openDialog(...e))}),[(0,s.bF)(i,{type:"mdi",path:r.mdiMenu},null,8,["path"])],16)])),default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("詳細")])),_:1}),(0,s.Lk)("div",Ed,[(0,s.Lk)("div",Md,[Xd,(0,s.Lk)("div",Hd,[0!==r.local_chunk_sentence_row.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(r.local_chunk_sentence_row.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(d,{size:"small",class:"ma-1",onClick:l=>a.openChunkDetailDialog(e),key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256)):((0,s.uX)(),(0,s.Wv)(d,{key:1,class:"ma-1",color:"grey",size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))])]),(0,s.Lk)("div",zd,[Ud,(0,s.Lk)("div",Id,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_row.chunk_sentence)},null,8,Nd)])]),(0,s.Lk)("div",Ad,[Rd,(0,s.Lk)("div",Pd,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_row.translating_sentence)},null,8,Kd)])]),(0,s.Lk)("div",Od,[Gd,(0,s.Lk)("div",Bd,[(0,s.bF)(u,{modelValue:r.local_chunk_sentence_row.politeness,"onUpdate:modelValue":l[3]||(l[3]=e=>r.local_chunk_sentence_row.politeness=e),color:a.politenessColor,"show-ticks":"always",max:"4",step:"0.1",ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",Qd,[Zd,(0,s.Lk)("div",Jd,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_row.situation)},null,8,Yd)])]),(0,s.Lk)("div",qd,[$d,(0,s.Lk)("div",ei,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.local_chunk_sentence_row.notes)},null,8,li)])])]),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(h),(0,s.bF)(k,{text:"Close",variant:"plain",onClick:l[4]||(l[4]=e=>r.dialog=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,s.bF)(g,{modelValue:r.chunkDetailDialog,"onUpdate:modelValue":l[8]||(l[8]=e=>r.chunkDetailDialog=e),"max-width":"600",style:{"font-size":"12px"}},{default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("使用チャンク(詳細)")])),_:1}),(0,s.Lk)("div",ti,[(0,s.Lk)("div",ni,[si,(0,s.Lk)("div",ri,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.learning_chunk)},null,8,ai)])]),(0,s.Lk)("div",oi,[di,(0,s.Lk)("div",ii,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.translating_chunk)},null,8,ci)])]),(0,s.Lk)("div",ui,[hi,(0,s.Lk)("div",ki,[(0,s.bF)(u,{modelValue:r.selectedChunk.value.politeness,"onUpdate:modelValue":l[6]||(l[6]=e=>r.selectedChunk.value.politeness=e),color:a.displayPolitenessColor(r.selectedChunk.value.politeness),"show-ticks":"always",max:"4",step:"1","hide-details":"auto","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",pi,[_i,(0,s.Lk)("div",bi,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.nuance)},null,8,gi)])]),(0,s.Lk)("div",fi,[mi,(0,s.Lk)("div",vi,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.situation)},null,8,wi)])]),(0,s.Lk)("div",yi,[xi,(0,s.Lk)("div",Ci,[(0,s.Lk)("span",{innerHTML:a.replaceNewLines(r.selectedChunk.value.notes)},null,8,Li)])])]),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(h),(0,s.bF)(k,{color:"primary",onClick:l[7]||(l[7]=e=>r.chunkDetailDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("閉じる")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],38)}var Vi={props:{props_chunk_sentence_row:Object,index:Number},components:{SvgIcon:Me.A},data(){return{mdiMenu:Xe.ExW,dialog:!1,checked:!1,local_chunk_sentence_row:{...this.props_chunk_sentence_row},isHovered:!1,chunkDetailDialog:!1,selectedChunk:{}}},watch:{props_chunk_sentence_row:{handler(e){this.local_chunk_sentence_row={...e}},deep:!0,immediate:!0}},computed:{politenessColor(){const e=Math.max(this.props_chunk_sentence_row.politeness,parseFloat(this.props_chunk_sentence_row.politeness));return e>=0&&e<1?"#3F51B5":e>=1&&e<2?"#03A9F4":e>=2&&e<3?"#4CAF50":e>=3&&e<4?"#FF9800":e>=4?"#F44336":"grey"}},methods:{replaceNewLines(e){return e?e.replace(/\n/g,"<br>"):""},openDialog(){this.dialog=!0,this.local_chunk_sentence_row={...this.props_chunk_sentence_row}},toggleSelection(){this.checked=!this.checked,this.$emit("update:selected",this.checked,this.props_chunk_sentence_row)},openChunkDetailDialog(e){this.selectedChunk=e,this.chunkDetailDialog=!0},displayPolitenessColor(e){return 0===e?"#3F51B5":1===e?"#03A9F4":2===e?"#4CAF50":3===e?"#FF9800":4===e?"#F44336":"grey"}}};const ji=(0,v.A)(Vi,[["render",Fi],["__scopeId","data-v-5935bfcf"]]);var Wi=ji,Si={components:{ChunkSentenceSelectCompo:Wi},data(){return{mdi_magnify:Xe.U4M,mdi_plus_circle:Xe.JPg,mdi_random:Xe.mdiRandom,mdiChevronDown:Xe.W5x,mdiChevronUp:Xe.Fb5,all_chunk_sentence_rows:[],filtered_chunk_sentences:[],search_keyword:"",selected_chunks:[],randomDialog:!1,randomCount:5,folderVisibility:{},selectedFolderId:null,folderOptions:[]}},computed:{totalChunkSentenceCount(){return this.filtered_chunk_sentences.reduce(((e,l)=>e+l.chunk_sentences.length),0)}},methods:{...(0,kd.i0)(["addChunk","removeChunk","clearChunks"]),toggleFolderVisibility(e){Object.prototype.hasOwnProperty.call(this.folderVisibility,e)?this.folderVisibility[e]=!this.folderVisibility[e]:this.folderVisibility={...this.folderVisibility,[e]:!0}},filterChunks(){this.filtered_chunk_sentences=this.all_chunk_sentence_rows.map((e=>({...e,chunk_sentences:e.chunk_sentences.filter((e=>!this.search_keyword||(e.chunk_sentence.includes(this.search_keyword)||e.translating_sentence.includes(this.search_keyword)||e.situation.includes(this.search_keyword)||e.notes.includes(this.search_keyword))))})))},updateSelected(e,l){if(e)this.selected_chunks.push(l),this.addChunk(l);else{const e=this.selected_chunks.findIndex((e=>e.chunk_id===l.chunk_id));this.selected_chunks.splice(e,1),this.removeChunk(l)}},goToPractice(){this.$router.push("/speak_more/practice")},openRandomDialog(){this.randomDialog=!0},startRandomPractice(){const e=this.filtered_chunk_sentences.find((e=>e.folder_id===this.selectedFolderId));if(e){const l=e.chunk_sentences.sort((()=>.5-Math.random()));this.selected_chunks=l.slice(0,this.randomCount),this.clearChunks(),this.selected_chunks.forEach((e=>this.addChunk(e))),this.randomDialog=!1,this.goToPractice()}else console.error("Selected folder is not found")},async fetchChunkSentences(){try{const e=await fetch("/api/chunk_sentences/list",{method:"GET"});if(!e.ok)throw new Error("Network response was not ok.");const l=await e.json();this.all_chunk_sentence_rows=l,this.filterChunks(),l.forEach((e=>{this.folderVisibility={...this.folderVisibility,[e.folder_id]:!1},this.folderOptions.push({id:e.folder_id,name:e.folder_name})}))}catch(e){console.error("Fetch error:",e)}}},async mounted(){this.clearChunks(),await this.fetchChunkSentences()},watch:{search_keyword:function(){this.filterChunks()}}};const Ti=(0,v.A)(Si,[["render",hd]]);var Di=Ti;const Ei=e=>((0,s.Qi)("data-v-b93fa6d6"),e=e(),(0,s.jt)(),e),Mi=Ei((()=>(0,s.Lk)("h5",{class:"text-center"},"Speak More",-1))),Xi=Ei((()=>(0,s.Lk)("h2",{class:"text-center"},"- 実践 -",-1))),Hi=Ei((()=>(0,s.Lk)("h5",{class:"text-center mt-4"}," 作成した英文を発音しカウントしましょう。 ",-1))),zi=Ei((()=>(0,s.Lk)("h6",{class:"text-center",style:{color:"grey"}},[(0,s.eW)(" 話すシチュエーションをイメージしながら発声しましょう。"),(0,s.Lk)("br"),(0,s.eW)(" 詰まらず流暢に話せるまでが目安です。 ")],-1))),Ui=Ei((()=>(0,s.Lk)("h4",{class:"text-center mt-4"}," 作成した英文を発音しカウントしましょう。 ",-1))),Ii=Ei((()=>(0,s.Lk)("h5",{class:"text-center",style:{color:"grey"}},[(0,s.eW)(" 話すシチュエーションをイメージしながら発声しましょう。"),(0,s.Lk)("br"),(0,s.eW)(" 詰まらず流暢に話せるまでが目安です。 ")],-1))),Ni={class:"d-flex flex-wrap justify-space-between align-center"},Ai={class:"svg-icon-wrapper"},Ri={class:"d-flex justify-space-between align-center mt-2"},Pi={key:0},Ki={key:1},Oi={class:"svg-icon-wrapper"},Gi={class:"d-flex justify-space-between align-center mt-2 border-b",style:{color:"grey"}},Bi={class:"svg-icon-wrapper"},Qi={class:"d-flex justify-space-between align-center mt-2"},Zi={key:0},Ji={key:1},Yi={class:"svg-icon-wrapper"},qi={class:"d-flex justify-space-between align-center mt-2 border-b",style:{color:"grey"}},$i={class:"svg-icon-wrapper"},ec={class:"border d-flex flex-column justify-center align-center",style:{width:"50%",height:"100px"}},lc={class:"text-green"},tc={class:"d-flex justify-center align-center my-2"},nc={class:"d-flex justify-center align-center mt-2"},sc={class:"d-flex justify-center align-center mt-4",color:"primary"},rc={class:"d-flex flex-column px-2"},ac={class:"d-flex"},oc=Ei((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg border-b rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," チャンク ",-1))),dc={class:"border-t-lg border-e-lg rounded-te-lg border-b pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},ic={class:"d-flex"},cc=Ei((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),uc={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},hc={class:"d-flex mt-4"},kc=Ei((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 丁寧度 ",-1))),pc={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},_c={class:"d-flex"},bc=Ei((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," ニュアンス ",-1))),gc={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},fc={class:"d-flex"},mc=Ei((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),vc={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},wc={class:"d-flex"},yc=Ei((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),xc={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Cc={class:"d-flex flex-column px-2"},Lc={class:"d-flex"},Fc=Ei((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}}," 使用チャンク ",-1))),Vc={class:"border-t-lg border-e-lg rounded-te-lg d-flex flex-wrap align-center",style:{width:"calc(100% - 110px)"}},jc={class:"d-flex"},Wc=Ei((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" チャンク文/"),(0,s.Lk)("br"),(0,s.eW)("フレーズ ")],-1))),Sc={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Tc={class:"d-flex"},Dc=Ei((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 翻訳文 ",-1))),Ec={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Mc={class:"d-flex mt-4"},Xc=Ei((()=>(0,s.Lk)("div",{class:"border-t-lg border-e border-s-lg rounded-ts-lg pl-1 d-flex align-center",style:{width:"110px"}},[(0,s.eW)(" 丁寧度"),(0,s.Lk)("br"),(0,s.eW)("(自動計算) ")],-1))),Hc={class:"border-t-lg border-e-lg rounded-te-lg d-flex align-center justify-center px-2",style:{width:"calc(100% - 110px)"}},zc={class:"d-flex"},Uc=Ei((()=>(0,s.Lk)("div",{class:"border-t border-b border-e border-s-lg pl-1 d-flex align-center",style:{width:"110px"}}," シチュエーション ",-1))),Ic={class:"border-t border-b border-e-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}},Nc={class:"d-flex"},Ac=Ei((()=>(0,s.Lk)("div",{class:"border-b-lg border-s-lg border-e rounded-bs-lg pl-1 d-flex align-center",style:{width:"110px"}}," 備考 ",-1))),Rc={class:"border-b-lg border-e-lg rounded-be-lg pa-2 d-flex align-center",style:{width:"calc(100% - 110px)"}};function Pc(e,l,t,n,r,a){const o=(0,s.g2)("v-divider"),d=(0,s.g2)("v-container"),i=(0,s.g2)("v-chip"),c=(0,s.g2)("svg-icon"),u=(0,s.g2)("v-btn"),h=(0,s.g2)("v-sheet"),k=(0,s.g2)("v-carousel-item"),_=(0,s.g2)("v-carousel"),b=(0,s.g2)("v-card-title"),g=(0,s.g2)("v-slider"),f=(0,s.g2)("v-card-text"),m=(0,s.g2)("v-spacer"),v=(0,s.g2)("v-card-actions"),w=(0,s.g2)("v-card"),y=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.Wv)(d,null,{default:(0,s.k6)((()=>[Mi,Xi,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[Hi,zi],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[Ui,Ii],64)),(0,s.bF)(o,{class:"my-4"}),r.supports_get_user_media?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(d,{key:2,class:"alert alert-danger"},{default:(0,s.k6)((()=>[(0,s.eW)(" getUserMedia is not supported in this browser. ")])),_:1})),(0,s.bF)(_,{modelValue:r.current_slide,"onUpdate:modelValue":l[0]||(l[0]=e=>r.current_slide=e),"hide-delimiters":"","show-arrows":!1,height:"350px"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.selected_chunks,((l,t)=>((0,s.uX)(),(0,s.Wv)(k,{key:t},{default:(0,s.k6)((()=>[(0,s.bF)(h,{class:"d-flex flex-column justify-center border-lg mx-3 rounded-lg"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"d-flex flex-column justify-center",style:{"word-break":"break-word"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ni,[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(i,{size:"x-small",class:"ma-1",onClick:l=>a.openChunkDetailDialog(e),key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1032,["onClick"]))],64)))),256))]),(0,s.Lk)("div",Ai,[(0,s.bF)(c,{class:"border rounded-circle",type:"mdi",path:r.mdi_dots_horizontal,onClick:e=>a.openChunkSentenceDetailDialog(l)},null,8,["path","onClick"])])]),e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",Ri,[(0,s.Lk)("h5",null,[l.is_blind?((0,s.uX)(),(0,s.CE)("span",Ki,"*****")):((0,s.uX)(),(0,s.CE)("span",Pi,(0,p.v_)(l.chunk_sentence),1))]),(0,s.Lk)("div",Oi,[(0,s.bF)(c,{class:"border rounded-circle",type:"mdi",path:r.mdi_volume_high,onClick:e=>a.speak(l.chunk_sentence)},null,8,["path","onClick"])])]),(0,s.Lk)("div",Gi,[(0,s.Lk)("h6",null,(0,p.v_)(l.translating_sentence),1),(0,s.Lk)("div",Bi,[(0,s.bF)(c,{class:"border rounded-circle",type:"mdi",path:l.is_blind?r.mdi_eye:r.mdi_eye_off,onClick:e=>a.toggleBlind(t)},null,8,["path","onClick"])])])],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",Qi,[(0,s.Lk)("h3",null,[l.is_blind?((0,s.uX)(),(0,s.CE)("span",Ji,"*****")):((0,s.uX)(),(0,s.CE)("span",Zi,(0,p.v_)(l.chunk_sentence),1))]),(0,s.Lk)("div",Yi,[(0,s.bF)(c,{class:"border rounded-circle",type:"mdi",path:r.mdi_volume_high,onClick:e=>a.speak(l.chunk_sentence)},null,8,["path","onClick"])])]),(0,s.Lk)("div",qi,[(0,s.Lk)("h4",null,(0,p.v_)(l.translating_sentence),1),(0,s.Lk)("div",$i,[(0,s.bF)(c,{class:"border rounded-circle",type:"mdi",path:l.is_blind?r.mdi_eye:r.mdi_eye_off,onClick:e=>a.toggleBlind(t)},null,8,["path","onClick"])])])],64))])),_:2},1024),(0,s.bF)(h,{class:"d-flex justify-center align-center mt-2"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{onClick:e=>a.decrementCount(t),class:"border d-flex justify-center",height:"60px",color:"secondary",style:{width:"10%"}},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"mdi",path:r.mdi_minus_circle},null,8,["path"])])),_:2},1032,["onClick"]),(0,s.Lk)("div",ec,[(0,s.Lk)("h1",null,(0,p.v_)(l.pronounced_count),1),(0,s.Lk)("h3",lc,"+"+(0,p.v_)(l.current_session_count),1)]),(0,s.bF)(u,{onClick:e=>a.incrementCount(t),class:"border d-flex justify-center",height:"60px",color:"secondary",style:{width:"10%"}},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"mdi",path:r.mdi_plus_circle},null,8,["path"])])),_:2},1032,["onClick"])])),_:2},1024),(0,s.Lk)("div",tc,[(0,s.Lk)("canvas",{ref_for:!0,ref:"canvas"+t,class:"mt-0",style:{height:"40px"}},null,512),(0,s.bF)(u,{onClick:e=>a.toggleRecording(t),disabled:!r.supports_get_user_media,color:"secondary"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"mdi",path:l.is_recording?r.mdi_stop_circle:r.mdi_record_circle},null,8,["path"]),(0,s.eW)(" "+(0,p.v_)(l.is_recording?"停止":"録音"),1)])),_:2},1032,["onClick","disabled"]),(0,s.bF)(u,{onClick:e=>a.playAudio(t),disabled:!l.audio_url||l.is_recording||r.is_playing,color:"secondary"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"mdi",path:r.mdi_play_circle},null,8,["path"]),(0,s.eW)(" 再生 ")])),_:2},1032,["onClick","disabled"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"]),(0,s.Lk)("div",nc,[(0,s.bF)(u,{onClick:a.prevSlide},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"mdi",path:r.mdi_arrow_left_circle},null,8,["path"])])),_:1},8,["onClick"]),(0,s.Lk)("span",null,(0,p.v_)(r.current_slide+1)+" / "+(0,p.v_)(r.selected_chunks.length),1),(0,s.bF)(u,{onClick:a.nextSlide},{default:(0,s.k6)((()=>[(0,s.bF)(c,{type:"mdi",path:r.mdi_arrow_right_circle},null,8,["path"])])),_:1},8,["onClick"])]),(0,s.Lk)("div",sc,[(0,s.bF)(u,{onClick:a.submitChunkSentences,color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("実践終了")])),_:1},8,["onClick"])]),(0,s.bF)(y,{modelValue:r.chunkDetailDialog,"onUpdate:modelValue":l[3]||(l[3]=e=>r.chunkDetailDialog=e),"max-width":"600",style:{"font-size":"12px"}},{default:(0,s.k6)((()=>[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(b,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("使用チャンク(詳細)")])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",rc,[(0,s.Lk)("div",ac,[oc,(0,s.Lk)("div",dc,(0,p.v_)(r.selectedChunk.value.learning_chunk),1)]),(0,s.Lk)("div",ic,[cc,(0,s.Lk)("div",uc,(0,p.v_)(r.selectedChunk.value.translating_chunk),1)]),(0,s.Lk)("div",hc,[kc,(0,s.Lk)("div",pc,[(0,s.bF)(g,{modelValue:r.selectedChunk.value.politeness,"onUpdate:modelValue":l[1]||(l[1]=e=>r.selectedChunk.value.politeness=e),color:a.displayPolitenessColor(r.selectedChunk.value.politeness),"show-ticks":"always",max:"4",step:"1","hide-details":"auto","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",_c,[bc,(0,s.Lk)("div",gc,(0,p.v_)(r.selectedChunk.value.nuance),1)]),(0,s.Lk)("div",fc,[mc,(0,s.Lk)("div",vc,(0,p.v_)(r.selectedChunk.value.situation),1)]),(0,s.Lk)("div",wc,[yc,(0,s.Lk)("div",xc,(0,p.v_)(r.selectedChunk.value.notes),1)])])])),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(m),(0,s.bF)(u,{color:"primary",onClick:l[2]||(l[2]=e=>r.chunkDetailDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("閉じる")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(y,{modelValue:r.chunkSentenceDetailDialog,"onUpdate:modelValue":l[6]||(l[6]=e=>r.chunkSentenceDetailDialog=e),"max-width":"600",style:{"font-size":"12px"}},{default:(0,s.k6)((()=>[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[(0,s.bF)(b,{class:"text-center",style:{"font-size":"16px"}},{default:(0,s.k6)((()=>[(0,s.eW)("詳細")])),_:1}),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Cc,[(0,s.Lk)("div",Lc,[Fc,(0,s.Lk)("div",Vc,[0!==r.selectedChunkSentence.used_chunks.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(r.selectedChunkSentence.used_chunks,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(),(0,s.Wv)(i,{size:"small",class:"ma-1",key:e.chunk_id},{default:(0,s.k6)((()=>[(0,s.eW)((0,p.v_)(e.title),1)])),_:2},1024))],64)))),256)):((0,s.uX)(),(0,s.Wv)(i,{key:1,class:"ma-1",color:"grey",size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)(" 設定無し ")])),_:1}))])]),(0,s.Lk)("div",jc,[Wc,(0,s.Lk)("div",Sc,(0,p.v_)(r.selectedChunkSentence.chunk_sentence),1)]),(0,s.Lk)("div",Tc,[Dc,(0,s.Lk)("div",Ec,(0,p.v_)(r.selectedChunkSentence.translating_sentence),1)]),(0,s.Lk)("div",Mc,[Xc,(0,s.Lk)("div",Hc,[(0,s.bF)(g,{modelValue:r.selectedChunkSentence.politeness,"onUpdate:modelValue":l[4]||(l[4]=e=>r.selectedChunkSentence.politeness=e),color:a.politenessColor,ticks:{0:"低",1:"",2:"中",3:"",4:"高"},"show-ticks":"always",max:"4",step:"0.1","tick-size":"4",readonly:""},null,8,["modelValue","color"])])]),(0,s.Lk)("div",zc,[Uc,(0,s.Lk)("div",Ic,(0,p.v_)(r.selectedChunkSentence.situation),1)]),(0,s.Lk)("div",Nc,[Ac,(0,s.Lk)("div",Rc,(0,p.v_)(r.selectedChunkSentence.notes),1)])])])),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(m),(0,s.bF)(u,{text:"Close",variant:"plain",onClick:l[5]||(l[5]=e=>r.chunkSentenceDetailDialog=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("Close")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}t(6573),t(8100),t(7936),t(7467),t(4732),t(9577),t(4603),t(7566),t(8721);var Kc={components:{SvgIcon:Me.A},computed:{...(0,kd.L8)(["selectedChunkSentences"]),politenessColor(){const e=this.selectedChunkSentence.politeness;return e>=0&&e<1?"#3F51B5":e>=1&&e<2?"#03A9F4":e>=2&&e<3?"#4CAF50":e>=3&&e<4?"#FF9800":e>=4?"#F44336":"grey"}},data(){return{mdi_plus_circle:Xe.JPg,mdi_minus_circle:Xe.Vo_,mdi_record_circle:Xe.WZQ,mdi_stop_circle:Xe.tJ6,mdi_volume_high:Xe.pgw,mdi_play_circle:Xe.LPM,mdi_arrow_right_circle:Xe.GJX,mdi_arrow_left_circle:Xe.$jF,mdi_eye:Xe.WCY,mdi_eye_off:Xe.Bk0,mdi_dots_horizontal:Xe.fA1,selected_chunks:[],is_playing:!1,supports_get_user_media:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),is_speaking:!1,current_audio:null,current_slide:0,chunkDetailDialog:!1,chunkSentenceDetailDialog:!1,selectedChunk:{},selectedChunkSentence:{}}},mounted(){this.selected_chunks=this.selectedChunkSentences.map((e=>({...e,audio_url:null,is_recording:!1,media_recorder:null,audio_chunks:[],audio_context:null,analyser:null,data_array:null,buffer_length:0,current_session_count:0,is_blind:!0}))),this.selected_chunks.length>0&&this.speak(this.selected_chunks[0].chunk_sentence)},methods:{...(0,kd.i0)(["setPracticedChunks"]),incrementCount(e){this.selected_chunks[e].pronounced_count++,this.selected_chunks[e].current_session_count++},decrementCount(e){this.selected_chunks[e].pronounced_count>0&&this.selected_chunks[e].current_session_count>0&&this.selected_chunks[e].pronounced_count--,this.selected_chunks[e].current_session_count>0&&this.selected_chunks[e].current_session_count--},async startRecording(e){if(!this.selected_chunks[e].is_recording)try{const l=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(l);this.selected_chunks[e].audio_chunks=[];const n=new(window.AudioContext||window.webkitAudioContext),r=n.createMediaStreamSource(l),a=n.createAnalyser();r.connect(a),a.fftSize=2048;const o=a.frequencyBinCount,d=new Uint8Array(o);this.selected_chunks[e].media_recorder=t,this.selected_chunks[e].audio_context=n,this.selected_chunks[e].analyser=a,this.selected_chunks[e].data_array=d,this.selected_chunks[e].buffer_length=o,t.ondataavailable=l=>{this.selected_chunks[e].audio_chunks.push(l.data)},t.onstop=()=>{const l=new Blob(this.selected_chunks[e].audio_chunks,{type:"audio/wav"});this.selected_chunks[e].audio_url=URL.createObjectURL(l),n.close(),this.playAudio(e)},t.start(),this.selected_chunks[e].is_recording=!0,await(0,s.dY)(),this.drawWaveform(e)}catch(l){console.error("Error accessing media devices.",l)}},stopRecording(e){this.selected_chunks[e].media_recorder&&"inactive"!==this.selected_chunks[e].media_recorder.state&&(this.selected_chunks[e].media_recorder.stop(),this.selected_chunks[e].is_recording=!1,this.incrementCount(e))},toggleRecording(e){this.selected_chunks[e].is_recording?this.stopRecording(e):(this.current_audio&&!this.current_audio.paused&&(this.current_audio.pause(),this.current_audio.currentTime=0),window.speechSynthesis.speaking&&(window.speechSynthesis.cancel(),this.is_speaking=!1),this.startRecording(e))},playAudio(e){if(this.selected_chunks[e].audio_url){const l=new Audio(this.selected_chunks[e].audio_url);this.current_audio=l,this.is_playing=!0,l.onended=()=>{this.is_playing=!1,this.current_audio=null},l.play()}},speak(e){if(!this.is_speaking)if("speechSynthesis"in window){const l=new SpeechSynthesisUtterance(e);l.lang="en-US",l.onstart=()=>{this.is_speaking=!0},l.onend=()=>{this.is_speaking=!1},window.speechSynthesis.speak(l)}else console.error("SpeechSynthesis is not supported in this browser.")},toggleBlind(e){this.selected_chunks[e].is_blind=!this.selected_chunks[e].is_blind},drawWaveform(e){if(!this.selected_chunks[e].analyser)return;const l=this.$refs[`canvas${e}`][0],t=l.getContext("2d"),n=()=>{if(!this.selected_chunks[e].is_recording)return;this.selected_chunks[e].analyser.getByteTimeDomainData(this.selected_chunks[e].data_array),t.fillStyle="rgb(200, 200, 200)",t.fillRect(0,0,l.width,l.height),t.lineWidth=2,t.strokeStyle="rgb(0, 0, 0)",t.beginPath();const s=1*l.width/this.selected_chunks[e].buffer_length;let r=0;for(let n=0;n<this.selected_chunks[e].buffer_length;n++){const a=this.selected_chunks[e].data_array[n]/128,o=a*l.height/2;0===n?t.moveTo(r,o):t.lineTo(r,o),r+=s}t.lineTo(l.width,l.height/2),t.stroke(),requestAnimationFrame(n)};n()},prevSlide(){this.current_slide>0?this.current_slide--:this.current_slide=this.selected_chunks.length-1,this.speak(this.selected_chunks[this.current_slide].chunk_sentence)},nextSlide(){this.current_slide<this.selected_chunks.length-1?this.current_slide++:this.current_slide=0,this.speak(this.selected_chunks[this.current_slide].chunk_sentence)},async submitChunkSentences(){try{const e=JSON.stringify({editDataList:this.selected_chunks.map((e=>({id:e.id,pronounced_count:e.pronounced_count,current_session_count:e.current_session_count})))}),l=await fetch("/api/chunk_sentences/list/update_pronounced_count",{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!l.ok)throw new Error("Failed to update chunks");const t=await l.json();console.log("Update successful:",t),this.setPracticedChunks(this.selected_chunks),this.$router.push({name:"Speak-More-Result"})}catch(e){console.error("Error submitting chunks:",e)}},openChunkDetailDialog(e){this.selectedChunk=e,this.chunkDetailDialog=!0},openChunkSentenceDetailDialog(e){this.selectedChunkSentence=e,this.chunkSentenceDetailDialog=!0},displayPolitenessColor(e){return 0===e?"#3F51B5":1===e?"#03A9F4":2===e?"#4CAF50":3===e?"#FF9800":4===e?"#F44336":"grey"}}};const Oc=(0,v.A)(Kc,[["render",Pc],["__scopeId","data-v-b93fa6d6"]]);var Gc=Oc;const Bc=e=>((0,s.Qi)("data-v-91a3ec9a"),e=e(),(0,s.jt)(),e),Qc=Bc((()=>(0,s.Lk)("h5",{class:"text-center"},"Speak More",-1))),Zc=Bc((()=>(0,s.Lk)("h2",{class:"text-center"},"- 結果 -",-1))),Jc={key:0,class:"text-center mt-4",style:{color:"grey"}},Yc={key:1,class:"text-center mt-4",style:{color:"grey"}},qc={class:"d-flex flex-column"},$c={style:{color:"grey"}},eu={class:"d-flex justify-end border-l"},lu=Bc((()=>(0,s.Lk)("span",null,"（",-1))),tu={class:"text-green"},nu=Bc((()=>(0,s.Lk)("span",null,"）",-1))),su={class:"d-flex flex-column",style:{width:"calc(100% - 100px)"}},ru={style:{color:"grey"}},au={class:"d-flex justify-end border-l",style:{width:"100px"}},ou=Bc((()=>(0,s.Lk)("span",null,"（",-1))),du={class:"text-green"},iu=Bc((()=>(0,s.Lk)("span",null,"）",-1))),cu={class:"d-flex justify-center mt-4"};function uu(e,l,t,n,r,a){const o=(0,s.g2)("v-divider"),d=(0,s.g2)("v-list-item-content"),i=(0,s.g2)("v-list-item"),c=(0,s.g2)("v-list"),u=(0,s.g2)("v-btn"),h=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(h,null,{default:(0,s.k6)((()=>[Qc,Zc,e.$vuetify.display.xs?((0,s.uX)(),(0,s.CE)("h5",Jc," 以下のチャンク文/フレーズを実践しました。 ")):((0,s.uX)(),(0,s.CE)("h4",Yc," 以下のチャンク文/フレーズを実践しました。 ")),(0,s.bF)(o,{class:"mt-4"}),(0,s.bF)(c,{style:{"word-break":"break-word"},class:"mt-4"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.practicedChunks,(l=>((0,s.uX)(),(0,s.Wv)(i,{key:l.chunk_id},{default:(0,s.k6)((()=>[e.$vuetify.display.xs?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"d-flex flex-column"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",qc,[(0,s.Lk)("h5",null,(0,p.v_)(l.chunk_sentence),1),(0,s.Lk)("h6",$c,(0,p.v_)(l.translating_sentence),1)]),(0,s.Lk)("div",eu,[(0,s.Lk)("h4",null,(0,p.v_)(l.pronounced_count),1),lu,(0,s.Lk)("h4",tu," +"+(0,p.v_)(l.current_session_count),1),nu])])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(d,{key:1,class:"d-flex align-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",su,[(0,s.Lk)("h4",null,(0,p.v_)(l.chunk_sentence),1),(0,s.Lk)("h5",ru,(0,p.v_)(l.translating_sentence),1)]),(0,s.Lk)("div",au,[(0,s.Lk)("h4",null,(0,p.v_)(l.pronounced_count),1),ou,(0,s.Lk)("h4",du," +"+(0,p.v_)(l.current_session_count),1),iu])])),_:2},1024))])),_:2},1024)))),128))])),_:1}),(0,s.Lk)("div",cu,[(0,s.bF)(u,{width:"30%",onClick:l[0]||(l[0]=l=>e.$router.push("/speak_more/select")),color:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("戻る")])),_:1})])])),_:1})}var hu={computed:{...(0,kd.L8)(["practicedChunks"])}};const ku=(0,v.A)(hu,[["render",uu],["__scopeId","data-v-91a3ec9a"]]);var pu=ku;const _u=(0,s.Lk)("h5",{class:"text-center"},"- 統計 -",-1),bu=(0,s.Lk)("h2",{class:"text-center"},"学習分析",-1),gu=(0,s.Lk)("canvas",{id:"chunk_chart"},null,-1),fu=(0,s.Lk)("canvas",{id:"chunk_sentence_chart"},null,-1),mu=(0,s.Lk)("canvas",{id:"chunk_pronounced_chart"},null,-1),vu=(0,s.Lk)("canvas",{id:"chunk_sentence_pronounced_chart"},null,-1);function wu(e,l,t,n,r,a){const o=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(o,null,{default:(0,s.k6)((()=>[_u,bu,gu,fu,mu,vu])),_:1})}var yu=t(6978),xu=t.n(yu),Cu={data(){return{dates:[],chunk_registration_data:[],chunk_sentence_registration_data:[],chunk_pronounced_data:[],chunk_sentence_pronounced_data:[]}},methods:{async fetchData(){try{const e=await fetch("/api/statistics",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Network response was not ok");const l=await e.json();this.dates=l.dates,this.chunk_registration_data=l.chunkRegistration,this.chunk_sentence_registration_data=l.chunkSentenceRegistration,this.chunk_pronounced_data=l.chunkPronounced,this.chunk_sentence_pronounced_data=l.chunkSentencePronounced,this.renderChunkChart(),this.renderChunkSentenceChart(),this.renderChunkPronouncedChart(),this.renderChunkSentencePronouncedChart()}catch(e){console.error("Error fetching data:",e)}},renderChunkChart(){const e=document.getElementById("chunk_chart").getContext("2d");new(xu())(e,{type:"bar",data:{labels:this.dates,datasets:[{label:"日毎のチャンク登録数",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,data:this.chunk_registration_data}]},options:{scales:{x:{title:{display:!0,text:"日付",align:"center",padding:10}},y:{title:{display:!0,text:"チャンク数",align:"center",padding:10},beginAtZero:!0}}}})},renderChunkSentenceChart(){const e=document.getElementById("chunk_sentence_chart").getContext("2d");new(xu())(e,{type:"bar",data:{labels:this.dates,datasets:[{label:"日毎のチャンク文/フレーズ登録数",backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1,data:this.chunk_sentence_registration_data}]},options:{scales:{x:{title:{display:!0,text:"日付",align:"center",padding:10}},y:{title:{display:!0,text:"チャンク文/フレーズ数",align:"center",padding:10},beginAtZero:!0}}}})},renderChunkPronouncedChart(){const e=document.getElementById("chunk_pronounced_chart").getContext("2d");new(xu())(e,{type:"bar",data:{labels:this.dates,datasets:[{label:"日毎のチャンク発声回数",backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1,data:this.chunk_pronounced_data}]},options:{scales:{x:{title:{display:!0,text:"日付",align:"center",padding:10}},y:{title:{display:!0,text:"発声回数",align:"center",padding:10},beginAtZero:!0}}}})},renderChunkSentencePronouncedChart(){const e=document.getElementById("chunk_sentence_pronounced_chart").getContext("2d");new(xu())(e,{type:"bar",data:{labels:this.dates,datasets:[{label:"日毎のチャンク文/フレーズ発声回数",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,data:this.chunk_sentence_pronounced_data}]},options:{scales:{x:{title:{display:!0,text:"日付",align:"center",padding:10}},y:{title:{display:!0,text:"発声回数",align:"center",padding:10},beginAtZero:!0}}}})}},async mounted(){await this.fetchData()}};const Lu=(0,v.A)(Cu,[["render",wu]]);var Fu=Lu;const Vu=(0,s.Lk)("h1",{class:"text-center"},"使い方",-1),ju=(0,s.Lk)("p",{class:"text-center mt-2"},[(0,s.eW)(" 基本的な使い方については "),(0,s.Lk)("a",{href:"https://www.canva.com/design/DAGKy9lmfso/HWsznOFN7yRteTeeCCLvMw/edit?utm_content=DAGKy9lmfso&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton"},"こちら"),(0,s.eW)(" をご参照ください！！ ")],-1);function Wu(e,l){const t=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(t,null,{default:(0,s.k6)((()=>[Vu,ju])),_:1})}const Su={},Tu=(0,v.A)(Su,[["render",Wu]]);var Du=Tu;const Eu=(0,d.aE)({history:(0,d.LA)(),routes:[{name:"Login",path:"/account/login",component:y,meta:{title:"ログイン"}},{name:"Register",path:"/account/register",component:W,meta:{title:"アカウント登録"}},{name:"Profile",path:"/account/profile",component:K,meta:{title:"プロフィール"}},{name:"Index",path:"/",component:ne,meta:{title:"ホーム"}},{name:"NotFound",path:"/:catchAll(.*)",component:de,meta:{title:"ページが見つかりません"}},{name:"Pyvis",path:"/pyvis",component:_e,meta:{title:"チャンクネットワーク"}},{name:"Folders-List",path:"/folders/list",component:Ze,meta:{title:"フォルダリスト"}},{name:"Chunks-List",path:"/chunks/list",component:Yl,meta:{title:"チャンクリスト"}},{name:"Chunks-List-Add",path:"/chunks/list/add",component:Et,meta:{title:"チャンク追加"}},{name:"Chunks-List-Edit",path:"/chunks/list/edit",component:Nn,meta:{title:"チャンク編集"}},{name:"Chunk-Sentences-List",path:"/chunk_sentences/list",component:kr,meta:{title:"チャンク文/フレーズリスト"}},{name:"Chunk-Sentences-List-Create",path:"/chunk_sentences/list/create",component:Fa,meta:{title:"チャンク文/フレーズリスト追加"}},{name:"Chunk-Sentences-List-Edit",path:"/chunk_sentences/list/edit",component:sd,meta:{title:"チャンク文/フレーズリスト編集"}},{name:"Speak-More-Select",path:"/speak_more/select",component:Di,meta:{title:"発声練習選択"}},{name:"Speak-More-Practice",path:"/speak_more/practice",component:Gc,meta:{title:"発声練習"}},{name:"Speak-More-Result",path:"/speak_more/result",component:pu,meta:{title:"発声練習結果"}},{name:"Statistics",path:"/statistics",component:Fu,meta:{title:"学習統計"}},{name:"Usage",path:"/usage",component:Du,meta:{title:"使い方"}}]});var Mu=Eu,Xu=(0,kd.y$)({state:{selectedChunkSentences:[],practicedChunks:[]},mutations:{ADD_CHUNK(e,l){e.selectedChunkSentences.push(l)},REMOVE_CHUNK(e,l){e.selectedChunkSentences=e.selectedChunkSentences.filter((e=>e.chunk_id!==l.chunk_id))},CLEAR_CHUNKS(e){e.selectedChunkSentences=[]},SET_PRACTICED_CHUNKS(e,l){e.practicedChunks=l}},actions:{addChunk({commit:e},l){e("ADD_CHUNK",l)},removeChunk({commit:e},l){e("REMOVE_CHUNK",l)},clearChunks({commit:e}){e("CLEAR_CHUNKS")},setPracticedChunks({commit:e},l){e("SET_PRACTICED_CHUNKS",l)}},getters:{selectedChunkSentences:e=>e.selectedChunkSentences,practicedChunks:e=>e.practicedChunks}}),Hu=(t(5524),t(9666)),zu=t(6995),Uu=t(5741),Iu=t(9616),Nu=t(4458);(0,Nu.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const Au=(0,Hu.$N)({icons:{defaultSet:"mdi",aliases:Iu.z,sets:{mdi:Iu.r}},components:zu,directives:Uu}),Ru=(0,n.Ef)(k);Mu.beforeEach(((e,l,t)=>{e.meta.title&&(document.title=e.meta.title),t()})),Ru.use(Mu),Ru.use(Xu),Ru.use(Au),Ru.mount("#app")}},l={};function t(n){var s=l[n];if(void 0!==s)return s.exports;var r=l[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=e,function(){var e=[];t.O=function(l,n,s,r){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],r=e[c][2];for(var o=!0,d=0;d<n.length;d++)(!1&r||a>=r)&&Object.keys(t.O).every((function(e){return t.O[e](n[d])}))?n.splice(d--,1):(o=!1,r<a&&(a=r));if(o){e.splice(c--,1);var i=s();void 0!==i&&(l=i)}}return l}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,s,r]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var n in l)t.o(l,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:l[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={57:0};t.O.j=function(l){return 0===e[l]};var l=function(l,n){var s,r,a=n[0],o=n[1],d=n[2],i=0;if(a.some((function(l){return 0!==e[l]}))){for(s in o)t.o(o,s)&&(t.m[s]=o[s]);if(d)var c=d(t)}for(l&&l(n);i<a.length;i++)r=a[i],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(l.bind(null,0)),n.push=l.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(9952)}));n=t.O(n)})();
//# sourceMappingURL=index.js.map